<mat-toolbar class="simple-toolbar">
    <span>Dynamic changes</span>
</mat-toolbar>

<mat-checkbox [(ngModel)]="scrollTrolling"
    >Enable / Disable throttling for scrolling (enabled by default for tables)</mat-checkbox
>
<br />
<br />

<ngx-table-builder
    #table
    [source]="data"
    [row-height]="60"
    [auto-height]="true"
    [vertical-border]="false"
    [throttling]="scrollTrolling"
>
    <ngx-column key="cost" override-position>
        <ng-template ngx-td [row]="true" let-row>
            <span [class.cost-disable]="!$any(row)?.active">{{ $any(row)?.cost | currency }}</span>
        </ng-template>
    </ngx-column>

    <ngx-column *ngFor="let key of table.modelColumnKeys" [key]="key">
        <ng-container *ngIf="key === 'symbol'">
            <ng-template ngx-td [row]="true" let-row>
                <mat-form-field class="example-full-width">
                    <div [@.disabled]="true">
                        <input
                            matInput
                            placeholder="Editable field"
                            [ngModel]="$any(row)?.symbol"
                            (ngModelChange)="updateRow(row, 'symbol', $event)"
                        />
                    </div>
                </mat-form-field>
            </ng-template>
        </ng-container>

        <ng-container *ngIf="key === 'weight'; else other">
            <ng-template ngx-td [row]="true" let-row> {{ row?.weight }} - {{ row?.symbol }} </ng-template>
        </ng-container>

        <ng-template #other ngx-td [nowrap]="false" let-cell>{{ cell }}</ng-template>
    </ngx-column>

    <ngx-column key="active" width="60" override-position [sticky-end]="true">
        <ng-template ngx-th></ng-template>
        <ng-template ngx-td [row]="true" let-row>
            <div [@.disabled]="true">
                <mat-checkbox
                    [ngModel]="$any(row)?.active"
                    (ngModelChange)="updateRow(row, 'active', $event)"
                ></mat-checkbox>
            </div>
        </ng-template>
    </ngx-column>
</ngx-table-builder>
