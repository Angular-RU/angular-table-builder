!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("ngx-virtual-scroller"),require("@angular/cdk/drag-drop"),require("@angular/common"),require("rxjs/operators"),require("rxjs"),require("@angular/animations"),require("@angular/platform-browser")):"function"==typeof define&&define.amd?define("@angular-ru/ng-table-builder",["exports","@angular/core","ngx-virtual-scroller","@angular/cdk/drag-drop","@angular/common","rxjs/operators","rxjs","@angular/animations","@angular/platform-browser"],t):t(((e=e||self)["angular-ru"]=e["angular-ru"]||{},e["angular-ru"]["ng-table-builder"]={}),e.ng.core,e.ngxVirtualScroller,e.ng.cdk["drag-drop"],e.ng.common,e.rxjs.operators,e.rxjs,e.ng.animations,e.ng.platformBrowser)}(this,function(e,t,n,i,r,o,l,s,a){"use strict";var c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function u(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var p=function(){return(p=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function h(e,t,n,i){return new(n||(n=Promise))(function(r,o){function l(e){try{a(i.next(e))}catch(t){o(t)}}function s(e){try{a(i["throw"](e))}catch(t){o(t)}}function a(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(l,s)}a((i=i.apply(e,t||[])).next())})}function d(e,t){var n,i,r,o,l={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:s(0),"throw":s(1),"return":s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,i&&(r=2&o[0]?i["return"]:o[0]?i["throw"]||((r=i["return"])&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return l.label++,{value:o[1],done:!1};case 5:l.label++,i=o[1],o=[0];continue;case 7:o=l.ops.pop(),l.trys.pop();continue;default:if(!(r=(r=l.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){l=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){l.label=o[1];break}if(6===o[0]&&l.label<r[1]){l.label=r[1],r=o;break}if(r&&l.label<r[2]){l.label=r[2],l.ops.push(o);break}r[2]&&l.ops.pop(),l.trys.pop();continue}o=t.call(e,l)}catch(s){o=[6,s],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function g(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}function f(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,r,o=n.call(e),l=[];try{for(;(void 0===t||t-- >0)&&!(i=o.next()).done;)l.push(i.value)}catch(s){r={error:s}}finally{try{i&&!i.done&&(n=o["return"])&&n.call(o)}finally{if(r)throw r.error}}return l}var m={ROW:"ROW",CELL:"CELL"},y=new t.InjectionToken("NGX_TABLE_OPTIONS"),b={ID:"id"},v="source",w="schemaColumns",_="keydown",x="keyup",C=function(){return function(e){void 0===e&&(e=null),this.opened=!1,this.position={left:null,top:null},this.key=null,this.item=null,this.value=null,e&&(this.opened=e.opened,this.position=e.position,this.key=e.key,this.item=e.item,this.value=e.value)}}();function k(e,t){if(!t||!t.length)return e;for(var n=t.split("."),i=e,r=0;i&&r<n.length;++r)i=i[n[r]];return i}var I=function(){function e(){this.state={},this.events=new l.Subject}return e.prototype.openContextMenu=function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=null),this.state=new C({key:t,item:n,opened:!0,value:k(n,t)||null,position:{left:e.clientX,top:e.clientY}}),this.events.next(),e.stopPropagation(),e.preventDefault()},e.prototype.close=function(){this.state=new C,this.events.next()},e.decorators=[{type:t.Injectable}],e}();function S(e){return"number"==typeof e?isNaN(e)||e===Infinity:"string"==typeof e?0===e.trim().length:!e}var T=function(){function e(e){this.zone=e}return Object.defineProperty(e.prototype,"bodyRect",{get:function(){return document.querySelector("body").getBoundingClientRect()},enumerable:!0,configurable:!0}),e.replaceUndefinedOrNull=function(e,t){return S(t)?undefined:t},e.prototype.clone=function(e){return JSON.parse(JSON.stringify(e||null))||{}},e.prototype.isObject=function(e){return e===Object(e)},e.prototype.mergeDeep=function(e,t){var n=this,i=p({},e);return this.isObject(e)&&this.isObject(t)&&Object.keys(t).forEach(function(r){var o,l;n.isObject(t[r])?r in e?i[r]=n.mergeDeep(e[r],t[r]):Object.assign(i,((o={})[r]=t[r],o)):Object.assign(i,((l={})[r]=t[r],l))}),i},e.prototype.flattenKeysByRow=function(e,t,n){for(var i in void 0===t&&(t=null),void 0===n&&(n=[]),e)if(e.hasOwnProperty(i)){var r=e[i];if("object"==typeof r&&null!==r&&!Array.isArray(r)){var o=t?t+"."+i:i;this.flattenKeysByRow(e[i],o,n)}else n.push(t?t+"."+i:i)}return n},e.prototype.clean=function(t){return JSON.parse(JSON.stringify(t,e.replaceUndefinedOrNull.bind(this)))},e.prototype.requestAnimationFrame=function(e){var t=this;return new Promise(function(n){t.zone.runOutsideAngular(function(){window.requestAnimationFrame(function(){e(),n()})})})},e.prototype.microtask=function(e){return new Promise(function(t){e(),t()})},e.prototype.macrotask=function(e,t){var n=this;return void 0===t&&(t=0),new Promise(function(i){n.zone.runOutsideAngular(function(){window.setTimeout(function(){e(),i()},t)})})},e.SCROLLBAR_WIDTH=10,e.decorators=[{type:t.Injectable}],e.ctorParameters=function(){return[{type:t.NgZone}]},e}();function O(e){e.destroyed||e.detectChanges()}var E=function(){function e(e,t,n,i){this.cd=e,this.app=t,this.utils=n,this.ngZone=i,this.width=null,this.height=null,this.isViewed=!1,this.subscription=null}return Object.defineProperty(e.prototype,"left",{get:function(){return this.state.position&&this.state.position.left||0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this.state.position&&this.state.position.top||0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"overflowX",{get:function(){var e=this.width+this.left-this.utils.bodyRect.width;return e>0?e+T.SCROLLBAR_WIDTH:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"overflowY",{get:function(){var e=this.height+this.top-this.utils.bodyRect.height;return e>0?e+T.SCROLLBAR_WIDTH:0},enumerable:!0,configurable:!0}),e.prototype.updateView=function(){this.cd.detectChanges(),this.app.tick()},e.prototype.ngOnDestroy=function(){this.removeEventListener(),this.subscription.unsubscribe()},e.prototype.update=function(){var e=this;this.ngZone.runOutsideAngular(function(){window.setTimeout(function(){e.isViewed=e.state.opened,e.updateView(),e.state.opened&&(e.removeEventListener(),e.preventClose(),e.listenInsideClick()),window.setTimeout(function(){return e.updateView()})})})},e.prototype.listenInsideClick=function(){var e=this;this.ngZone.runOutsideAngular(function(){e.clickListener=function(t){try{var n=e.targetElement.nativeElement,i=t.target;n.contains(i)||(e.removeListener(t),e.taskId=window.setTimeout(function(){return e.removeListener(t)},e.closeTime))}catch(r){e.removeEventListener()}},window.addEventListener("mousedown",e.clickListener,!0)})},e.prototype.removeListener=function(e){this.removeEventListener(),this.close(e),O(this.cd)},e.prototype.removeEventListener=function(){window.removeEventListener("mousedown",this.clickListener,!0)},e.prototype.preventClose=function(){window.clearTimeout(this.taskId)},e}(),D=function(e){function n(t,n,i,r,o){var l=e.call(this,n,i,r,o)||this;return l.contextMenu=t,l.cd=n,l.app=i,l.utils=r,l.ngZone=o,l.width=300,l.height=300,l.maxHeight=400,l.closeTime=0,l}return u(n,e),Object.defineProperty(n.prototype,"state",{get:function(){return this.contextMenu.state},enumerable:!0,configurable:!0}),n.prototype.ngOnInit=function(){var e=this;this.subscription=this.contextMenu.events.subscribe(function(){return e.update()})},n.prototype.close=function(e){this.contextMenu.close(),e.preventDefault()},n.decorators=[{type:t.Component,args:[{selector:"ngx-context-menu",template:"<div class=\"table-grid__context-menu\" *ngIf=\"state?.opened\">\r\n    <div\r\n        #targetElement\r\n        class=\"context-menu\"\r\n        (contextmenu)=\"close($event)\"\r\n        [ngStyle]=\"{\r\n            'width.px': width,\r\n            'min-height.px': height,\r\n            'max-height.px': maxHeight,\r\n            'top.px': state?.position?.top - overflowY,\r\n            'left.px': state?.position?.left - overflowX,\r\n            visibility: state?.position ? 'visible' : 'hidden'\r\n        }\"\r\n    >\r\n        <ng-content></ng-content>\r\n    </div>\r\n</div>\r\n",changeDetection:t.ChangeDetectionStrategy.OnPush,encapsulation:t.ViewEncapsulation.None,styles:["@-webkit-keyframes delayedShow{to{visibility:visible}}@keyframes delayedShow{to{visibility:visible}}.table-grid__context-menu .context-menu{display:flex;position:fixed;background:#fff;z-index:100000000;border:1px solid #dcdcdc;box-shadow:1px 1px 2px #9c9c9c;flex-direction:column}.table-grid__context-menu .context-menu__item{margin-top:0;height:48px;line-height:16px;font-size:14px;font-weight:500;display:flex;flex-flow:row;box-sizing:border-box;padding:0 16px 0 23px;align-items:center;justify-content:space-between}.table-grid__context-menu .context-menu__item .content{overflow:hidden;white-space:nowrap;text-overflow:ellipsis;text-align:left}.table-grid__context-menu .context-menu__item .content.align-center{text-align:center}.table-grid__context-menu .context-menu__item:not(.context-menu__title):hover{cursor:pointer;background:rgba(0,0,0,.04)}.table-grid__context-menu .context-menu__item ngx-menu-content:not(.icon-place){overflow:hidden;min-width:35px;text-align:center}.table-grid__context-menu .context-menu__item ngx-menu-content:not(.icon-place):not(.content-phrase){margin:auto auto auto 10px}.table-grid__context-menu .context-menu__item--disable{opacity:.5;pointer-events:none}.table-grid__context-menu .context-menu__item:hover>.context-menu__sub-menu-place>.sub-menu__tree{visibility:visible;transition-delay:.3s;opacity:1}.table-grid__context-menu .context-menu .sub-menu__tree--content{max-height:350px;overflow:auto}.table-grid__context-menu .context-menu__sub-menu-place{margin-left:auto;line-height:15px}.table-grid__context-menu .context-menu__sub-menu-place .sub-menu__tree{opacity:0;visibility:hidden;position:fixed;background:#fff;z-index:100000;border:1px solid #dcdcdc;box-shadow:2px 1px 1px #9c9c9c;transition:visibility .1s linear,opacity .1s linear}.table-grid__context-menu .context-menu__sub-menu-place .sub-menu__arrow-icon{height:25px;width:25px;margin-right:15px}.table-grid__context-menu .context-menu .context-menu__sub-hidden{display:none}.table-grid__context-menu .context-menu__icon-place{width:25px;margin-right:5px}.table-grid__context-menu .context-menu__icon-place img{max-width:25px;max-height:25px}.table-grid__context-menu .context-menu__title{color:rgba(0,0,0,.54)}.table-grid__context-menu .context-menu__divider{display:block;margin:0;border-top:1px solid rgba(0,0,0,.12)}"]}]}],n.ctorParameters=function(){return[{type:I},{type:t.ChangeDetectorRef},{type:t.ApplicationRef},{type:T},{type:t.NgZone}]},n.propDecorators={width:[{type:t.Input}],height:[{type:t.Input}],maxHeight:[{type:t.Input,args:["max-height"]}],targetElement:[{type:t.ViewChild,args:["targetElement",{"static":!1}]}]},n}(E),P={START_WITH:"START_WITH",END_WITH:"END_WITH",CONTAINS:"CONTAINS",DOES_NOT_CONTAIN:"DOES_NOT_CONTAIN",EQUALS:"EQUALS",DOES_NOT_EQUAL:"DOES_NOT_EQUAL"},R=function(){return function(){this.key=null,this.opened=null,this.position={left:null,top:null}}}(),H=function(){function e(){this.nowrap=null,this.width=null,this.resizable=null,this.sortable=null,this.filterable=null,this.draggable=null,this.filterType=null}return e.propDecorators={nowrap:[{type:t.Input}],width:[{type:t.Input}],resizable:[{type:t.Input}],sortable:[{type:t.Input}],filterable:[{type:t.Input}],draggable:[{type:t.Input}],filterType:[{type:t.Input,args:["filter-type"]}],cssClass:[{type:t.Input,args:["css-class"]}],cssStyle:[{type:t.Input,args:["css-style"]}]},e}(),V=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return u(n,e),n.decorators=[{type:t.Component,args:[{selector:"ngx-options",template:"",changeDetection:t.ChangeDetectionStrategy.OnPush,encapsulation:t.ViewEncapsulation.None}]}],n}(H),M=function(){function e(e){this.template=e,this.type=null,this.row=null,this.bold=null,this.nowrap=!0,this.width=null,this.height=null,this.cssStyles=null,this.cssClasses=null,this.onClick=new t.EventEmitter,this.dblClick=new t.EventEmitter}return e.propDecorators={row:[{type:t.Input}],bold:[{type:t.Input}],nowrap:[{type:t.Input}],width:[{type:t.Input}],height:[{type:t.Input}],cssStyles:[{type:t.Input,args:["ng-style"]}],cssClasses:[{type:t.Input,args:["ng-class"]}],onClick:[{type:t.Output}],dblClick:[{type:t.Output}]},e}(),A=function(e){function n(t){var n=e.call(this,t)||this;return n.template=t,n.type=null,n.nowrap=!1,n.bold=!0,n}return u(n,e),n.decorators=[{type:t.Directive,args:[{selector:"ng-template[ngx-th]"}]}],n.ctorParameters=function(){return[{type:t.TemplateRef}]},n.propDecorators={type:[{type:t.Input,args:["ngx-th"]}]},n}(M),L=function(e){function n(t){var n=e.call(this,t)||this;return n.template=t,n.type=null,n}return u(n,e),n.decorators=[{type:t.Directive,args:[{selector:"ng-template[ngx-td]"}]}],n.ctorParameters=function(){return[{type:t.TemplateRef}]},n.propDecorators={type:[{type:t.Input,args:["ngx-td"]}]},n}(M),j=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.key=null,t.stickyLeft=!1,t.emptyHead=null,t.headTitle=null,t.customKey=!1,t.importantTemplate=!1,t.stickyRight=!1,t.verticalLine=!1,t}return u(n,e),n.prototype.withKey=function(e){return this.key=e,this},n.decorators=[{type:t.Component,args:[{selector:"ngx-column",template:"",changeDetection:t.ChangeDetectionStrategy.OnPush,encapsulation:t.ViewEncapsulation.None}]}],n.propDecorators={key:[{type:t.Input}],stickyLeft:[{type:t.Input,args:["sticky"]}],emptyHead:[{type:t.Input,args:["empty-head"]}],headTitle:[{type:t.Input,args:["head-title"]}],customKey:[{type:t.Input,args:["custom-key"]}],importantTemplate:[{type:t.Input,args:["important-template"]}],stickyRight:[{type:t.Input,args:["sticky-end"]}],verticalLine:[{type:t.Input,args:["vertical-line"]}],th:[{type:t.ContentChild,args:[A,{"static":!1}]}],td:[{type:t.ContentChild,args:[L,{"static":!1}]}]},n}(H),N=function(){function e(){this.wheelMaxDelta=300,this.bufferAmount=0}return e.MACRO_TIME=1e3,e.TIME_RELOAD=400,e.COLUMN_RESIZE_MIN_WIDTH=50,e.FRAME_TIME=66,e.ROW_HEIGHT=45,e.TIME_IDLE=200,e.decorators=[{type:t.Injectable}],e}(),K=function(){function e(){this.height=N.ROW_HEIGHT,this.contentCell=null,this.alignCenter=null,this.cssClasses=null,this.bold=null}return e.propDecorators={height:[{type:t.Input}],contentCell:[{type:t.Input,args:["content-cell"]}],alignCenter:[{type:t.Input,args:["align-center"]}],cssClasses:[{type:t.Input,args:["css-class"]}],bold:[{type:t.Input}]},e}(),z=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return u(n,e),n.decorators=[{type:t.Component,args:[{selector:"ngx-header",template:'<div\r\n    class="table-grid__table-content-place"\r\n    [class.table-grid__table-content-place--content-cell]="contentCell !== null"\r\n    [class.table-grid__table-content-place--align-center]="alignCenter !== null"\r\n    [class.table-grid__table-content-place--bold]="bold !== null"\r\n    [style.height.px]="height"\r\n>\r\n    <div [ngClass]="cssClasses" [class.content-box]="contentCell !== null">\r\n        <ng-content></ng-content>\r\n    </div>\r\n</div>\r\n',changeDetection:t.ChangeDetectionStrategy.OnPush,encapsulation:t.ViewEncapsulation.None}]}],n}(K),B=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return u(n,e),n.decorators=[{type:t.Component,args:[{selector:"ngx-footer",template:'<div\n    class="table-grid__table-content-place"\n    [class.table-grid__table-content-place--content-cell]="contentCell !== null"\n    [class.table-grid__table-content-place--align-center]="alignCenter !== null"\n    [class.table-grid__table-content-place--bold]="bold !== null"\n    [style.height.px]="height"\n>\n    <div [class.content-box]="contentCell !== null">\n        <ng-content></ng-content>\n    </div>\n</div>\n',changeDetection:t.ChangeDetectionStrategy.OnPush,encapsulation:t.ViewEncapsulation.None}]}],n}(K),F=function(){function e(){this.workerFunctionToUrlMap=new WeakMap,this.promiseToWorkerMap=new WeakMap}return e.createWorkerUrl=function(e){var t=e.toString(),n=new Blob(["\n            self.addEventListener('message', function(e) {\n                postMessage(("+t+")(e.data));\n            });\n        "],{type:"text/javascript"});return URL.createObjectURL(n)},e.prototype.run=function(e,t){var n=this.getOrCreateWorkerUrl(e);return this.runUrl(n,t)},e.prototype.runUrl=function(e,t){var n=new Worker(e),i=this.createPromiseForWorker(n,t),r=this.createPromiseCleaner(i);return this.promiseToWorkerMap.set(i,n),i.then(r)["catch"](r),i},e.prototype.terminate=function(e){return this.removePromise(e)},e.prototype.getWorker=function(e){return this.promiseToWorkerMap.get(e)},e.prototype.createPromiseForWorker=function(e,t){return new Promise(function(n,i){e.addEventListener("message",function(e){return n(e.data)}),e.addEventListener("error",i),e.postMessage(t)})},e.prototype.getOrCreateWorkerUrl=function(t){if(!this.workerFunctionToUrlMap.has(t)){var n=e.createWorkerUrl(t);return this.workerFunctionToUrlMap.set(t,n),n}return this.workerFunctionToUrlMap.get(t)},e.prototype.createPromiseCleaner=function(e){var t=this;return function(n){return t.removePromise(e),n}},e.prototype.removePromise=function(e){var t=this.promiseToWorkerMap.get(e);return t&&t.terminate(),this.promiseToWorkerMap["delete"](e),e},e.decorators=[{type:t.Injectable}],e}();function W(e){var t=e.source,n=e.global,i=e.types,r=e.columns,o={CONTINUE:-1,BREAK:0,NEXT:1};o[o.CONTINUE]="CONTINUE",o[o.BREAK]="BREAK",o[o.NEXT]="NEXT";var l=n.value,s=n.type,a=t;function c(e,t,n){var r=!1,l=o.NEXT;if(n===i.START_WITH)r=e.toLocaleLowerCase().startsWith(t.toLocaleLowerCase());else if(n===i.END_WITH){var s=new RegExp(t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")+"$");r=!!e.match(s)}else n===i.CONTAINS?r=u(e,t):n===i.EQUALS?r=e===t:n===i.DOES_NOT_EQUAL&&(e!==t?(r=!0,l=o.CONTINUE):(r=!1,l=o.BREAK));return[l,r]}function u(e,t){return e.toLocaleLowerCase().includes(t.toLocaleLowerCase())}function p(e,t){void 0===t&&(t=[]);var n={};for(var i in e)e.hasOwnProperty(i)&&!t.includes(i)&&h(e,n,i);return n}function h(e,t,n){if("object"==typeof e[n]&&null!==e[n]){var i=p(e[n]);for(var r in i)i.hasOwnProperty(r)&&(t[n+"."+r]=i[r])}else t[n]=e[n]}return l&&(a=t.filter(function(e){return s===i.DOES_NOT_CONTAIN?!u(JSON.stringify(e),l):function(e){var t,n,i=!1,r=p(e);try{for(var a=g(Object.keys(r)),u=a.next();!u.done;u=a.next()){var h=u.value,d=String(r[h]),m=f(c(d,l,s),2),y=m[0],b=m[1];if(i=b,y!==o.CONTINUE){if(y===o.BREAK)break;if(i)break}}}catch(v){t={error:v}}finally{try{u&&!u.done&&(n=a["return"])&&n.call(a)}finally{if(t)throw t.error}}return i}(e)})),r.isEmpty||(a=a.filter(function(e){return function(e){var t,n,i=!0;try{for(var l=g(Object.keys(r.values)),s=l.next();!s.done;s=l.next()){var a=s.value,u=String((b=e,v=a,(v?v.split(".").reduce(function(e,t){return e&&e[t]},b):b)||"")).trim(),p=String(r.values[a]),h=r.types[a],d=f(c(u,p,h),2),m=d[0],y=d[1];if(!(i=i&&y)||m===o.BREAK)break}}catch(w){t={error:w}}finally{try{s&&!s.done&&(n=l["return"])&&n.call(l)}finally{if(t)throw t.error}}var b,v;return i}(e)})),a}var Z=N.TIME_IDLE,$=function(){function e(e,t,n,i){this.thread=e,this.utils=t,this.ngZone=n,this.app=i,this.filterValue=null,this.definition={},this.state=new R,this.types=P,this.filterOpenEvents=new l.Subject,this.events=new l.ReplaySubject,this.filterTypeDefinition={},this.filtering=!1,this.previousFiltering=!1}return Object.defineProperty(e.prototype,"globalFilterValue",{get:function(){return this.filterValue?String(this.filterValue).trim():null},enumerable:!0,configurable:!0}),e.prototype.changeFilteringStatus=function(){this.filtering=this.filterValueExist,this.filtering!==this.previousFiltering&&this.events.next({value:null,type:null}),this.previousFiltering=this.filtering},Object.defineProperty(e.prototype,"filterValueExist",{get:function(){var e=Object.values(this.definition).reduce(function(e,t){return e+t},"");return this.globalFilterValue&&this.globalFilterValue.length>0||e.length>0},enumerable:!0,configurable:!0}),e.prototype.openFilter=function(e,t){this.state={opened:!0,key:e,position:{left:t.clientX,top:t.clientY}},this.filterOpenEvents.next(),t.stopPropagation(),t.preventDefault()},e.prototype.closeFilter=function(){this.state=new R,this.filterOpenEvents.next()},e.prototype.filter=function(e){var t=this,n=this.filterType,i=this.globalFilterValue?String(this.globalFilterValue).trim():null;return new Promise(function(r){var o={source:e,types:P,global:{value:i,type:n},columns:{values:t.definition,types:t.filterTypeDefinition,isEmpty:t.checkIsEmpty(t.definition)}};t.thread.run(W,o).then(function(e){t.ngZone.runOutsideAngular(function(){return window.setTimeout(function(){r({source:e,fireSelection:function(){window.setTimeout(function(){t.events.next({value:i,type:n}),t.app.tick()},Z)}})},Z)})})})},e.prototype.checkIsEmpty=function(e){return 0===Object.keys(this.utils.clean(e)).length},e.decorators=[{type:t.Injectable}],e.ctorParameters=function(){return[{type:F},{type:T},{type:t.NgZone},{type:t.ApplicationRef}]},e}(),U=function(){function e(e){this.template=e,this.type=null}return e.decorators=[{type:t.Directive,args:[{selector:"ng-template[ngx-filter]"}]}],e.ctorParameters=function(){return[{type:t.TemplateRef}]},e.propDecorators={type:[{type:t.Input,args:["ngx-filter"]}]},e}(),X=function(e){function n(t,n,i,r,o){var l=e.call(this,n,i,r,o)||this;return l.filterable=t,l.cd=n,l.app=i,l.utils=r,l.ngZone=o,l.width=300,l.height=null,l.maxHeight=null,l.closeTime=150,l.leftX=10,l.topY=50,l}return u(n,e),Object.defineProperty(n.prototype,"state",{get:function(){return this.filterable.state},enumerable:!0,configurable:!0}),n.prototype.close=function(e){this.filterable.closeFilter(),e.preventDefault()},n.prototype.ngOnInit=function(){var e=this;this.subscription=this.filterable.filterOpenEvents.subscribe(function(){return e.update()})},n.decorators=[{type:t.Component,args:[{selector:"ngx-filter",template:"<div class=\"table-grid__filter-menu\" *ngIf=\"state.opened\">\n    <div\n        #targetElement\n        class=\"filter-menu\"\n        (contextmenu)=\"close($event)\"\n        [ngStyle]=\"{\n            'width.px': width,\n            'min-height.px': height,\n            'max-height.px': maxHeight,\n            'top.px': state?.position?.top + leftX - overflowY,\n            'left.px': state?.position?.left - topY - overflowX,\n            visibility: state?.position ? 'visible' : 'hidden'\n        }\"\n    >\n        <ng-template [ngIf]=\"isViewed\">\n            <ng-content></ng-content>\n        </ng-template>\n    </div>\n</div>\n",changeDetection:t.ChangeDetectionStrategy.OnPush,encapsulation:t.ViewEncapsulation.None,styles:[".table-grid__filter-menu .filter-menu{display:flex;position:fixed;background:#fff;z-index:100000000;border:1px solid #dcdcdc;box-shadow:1px 1px 2px #9c9c9c;flex-direction:column}"]}]}],n.ctorParameters=function(){return[{type:$},{type:t.ChangeDetectorRef},{type:t.ApplicationRef},{type:T},{type:t.NgZone}]},n.propDecorators={width:[{type:t.Input}],height:[{type:t.Input}],maxHeight:[{type:t.Input,args:["max-height"]}],filter:[{type:t.ContentChild,args:[U,{"static":!1}]}],targetElement:[{type:t.ViewChild,args:["targetElement",{"static":!1}]}]},n}(E);var q=N.ROW_HEIGHT,Y=N.MACRO_TIME,G=N.TIME_IDLE,Q=function(){function e(){var e;this.source=null,this.keys=[],this.striped=!0,this.lazy=!0,this.name=null,this.sortTypes=null,this.excludeKeys=[],this.autoWidth=!1,this.autoHeightDetect=!0,this.nativeScrollbar=!1,this.primaryKey=b.ID,this.columnWidth=null,this.rowHeight=null,this.asyncColumns=!0,this.verticalBorder=!0,this.enableSelection=!1,this.enableFiltering=!1,this.bufferAmount=null,this.schemaColumns=[],this.afterRendered=new t.EventEmitter,this.schemaChanges=new t.EventEmitter,this.columnOptions=null,this.columnTemplates=null,this.contextMenuTemplate=null,this.headerTemplate=null,this.footerTemplate=null,this.filterTemplate=null,this.tableViewportChecked=!0,this.isFrozenView=!1,this.isFirefoxMode=(void 0===e&&(e=null),(e||navigator.userAgent).toLowerCase().indexOf("firefox")>-1),this.modelColumnKeys=[],this.customModelColumnsKeys=[],this.isDragging={},this.accessDragging=!1,this.filterIdTask=null}return Object.defineProperty(e.prototype,"displayedColumns",{get:function(){return Object.keys(this.templateParser.compiledTemplates)||[]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"visibleColumns",{get:function(){return this.columnSchema.filter(function(e){return e.isVisible}).map(function(e){return e.key})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"positionColumns",{get:function(){return this.columnSchema.map(function(e){return e.key})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"columnSchema",{get:function(){return this.templateParser.schema&&this.templateParser.schema.columns||[]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectedItems",{get:function(){var e=this;return this.source.filter(function(t){return e.selectionModel.entries[t[e.primaryKey]]})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"firstItem",{get:function(){return this.source&&this.source[0]||{}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lastItem",{get:function(){return this.source&&this.source[this.source.length-1]||{}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectionModel",{get:function(){return this.selection.selectionModel},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"clientRowHeight",{get:function(){return parseInt(this.rowHeight)||q},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"clientColWidth",{get:function(){return this.autoWidth?null:parseInt(this.columnWidth)||null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"columnVirtualHeight",{get:function(){return this.source.length*this.clientRowHeight},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"columnHeight",{get:function(){return this.size*this.clientRowHeight+this.clientRowHeight},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this.source&&this.source.length||0},enumerable:!0,configurable:!0}),e.prototype.recheckViewportChecked=function(){this.tableViewportChecked=!this.tableViewportChecked,this.idleDetectChanges()},e.prototype.enableDragging=function(e){this.templateParser.compiledTemplates[e].draggable&&(this.accessDragging=!0,this.detectChanges())},e.prototype.disableDragging=function(){this.accessDragging&&(this.accessDragging=!1,this.detectChanges())},e.prototype.resizeColumn=function(e,t){var n=this,i=e.event,r=e.key;this.recheckViewportChecked(),this.disableDragging(),this.resize.resize(i,t,function(e){return n.calculateWidth(r,e)},function(){return n.afterCalculateWidth()}),i.preventDefault()},e.prototype.filter=function(){var e=this;if(!this.enableFiltering)throw new Error('You forgot to enable filtering: \n <ngx-table-builder [enable-filtering]="true" />');this.ngZone.runOutsideAngular(function(){window.clearInterval(e.filterIdTask),e.filterIdTask=window.setTimeout(function(){e.filterable.changeFilteringStatus(),e.sortAndFilter().then(function(){return e.reCheckDefinitions()})},Y)})},e.prototype.sortAndFilter=function(){return h(this,void 0,void 0,function(){var e,t,n;return d(this,function(i){switch(i.label){case 0:return this.toggleFreeze(),this.filterable.filterValueExist&&this.enableFiltering?[4,this.filterable.filter(this.originalSource)]:[3,3];case 1:return e=i.sent(),t=this,[4,this.sortable.sort(e.source)];case 2:return t.source=i.sent(),e.fireSelection(),[3,5];case 3:return this.sortable.empty||!this.source?[3,5]:(n=this,[4,this.sortable.sort(this.originalSource)]);case 4:n.source=i.sent(),i.label=5;case 5:return this.sortable.empty&&!this.filterable.filterValueExist&&(this.source=this.originalSource),this.toggleFreeze(G),[2]}})})},e.prototype.sortByKey=function(e){var t=this;this.sortable.updateSortKey(e),this.sortAndFilter().then(function(){return t.reCheckDefinitions()})},e.prototype.drop=function(e){var t=e.previousIndex,n=e.currentIndex,i=this.visibleColumns[t],r=this.visibleColumns[n];this.draggable.drop(i,r),this.changeSchema()},e.prototype.checkVisible=function(e){this.inViewport=e,this.detectChanges()},e.prototype.detectChanges=function(){this.cd.destroyed||this.cd.detectChanges()},e.prototype.toggleFreeze=function(e,t){var n=this;void 0===e&&(e=null),void 0===t&&(t=null),this.isFrozenView=!this.isFrozenView,e?window.setTimeout(function(){n.detectChanges(),t&&t()},e):this.detectChanges()},e.prototype.changeSchema=function(e){void 0===e&&(e=null);var t=this.templateParser.schema.exportColumns(),n=e||t;this.viewChanges.update({name:this.name,columns:n}),this.schemaChanges.emit(n),this.idleDetectChanges()},e.prototype.reCheckDefinitions=function(){this.filterable.definition=p({},this.filterable.definition),this.filterable.changeFilteringStatus(),this.detectChanges()},e.prototype.getCountKeys=function(){return Object.keys(this.firstItem).length},e.prototype.generateCustomModelColumnsKeys=function(){return this.excluding(this.keys)},e.prototype.generateModelColumnKeys=function(){return this.excluding(this.utils.flattenKeysByRow(this.firstItem))},e.prototype.idleDetectChanges=function(){var e=this;this.ngZone.runOutsideAngular(function(){return window.requestAnimationFrame(function(){return e.detectChanges()})})},e.prototype.calculateWidth=function(e,t){this.isDragging[e]=!0,this.onMouseResizeColumn(e,t)},e.prototype.afterCalculateWidth=function(){this.isDragging={},this.recheckViewportChecked(),this.changeSchema()},e.prototype.onMouseResizeColumn=function(e,t){this.templateParser.mutateColumnSchema(e,{width:t}),this.idleDetectChanges()},e.prototype.excluding=function(e){var t=this;return this.excludeKeys.length?e.filter(function(e){return!t.excludeKeys.some(function(t){return t instanceof RegExp?!!e.match(t):e===t})}):e},e.propDecorators={height:[{type:t.Input}],width:[{type:t.Input}],source:[{type:t.Input}],keys:[{type:t.Input}],striped:[{type:t.Input}],lazy:[{type:t.Input}],name:[{type:t.Input}],sortTypes:[{type:t.Input,args:["sort-types"]}],excludeKeys:[{type:t.Input,args:["exclude-keys"]}],autoWidth:[{type:t.Input,args:["auto-width"]}],autoHeightDetect:[{type:t.Input,args:["auto-height"]}],nativeScrollbar:[{type:t.Input,args:["native-scrollbar"]}],primaryKey:[{type:t.Input,args:["primary-key"]}],columnWidth:[{type:t.Input,args:["column-width"]}],rowHeight:[{type:t.Input,args:["row-height"]}],asyncColumns:[{type:t.Input,args:["async-columns"]}],verticalBorder:[{type:t.Input,args:["vertical-border"]}],enableSelection:[{type:t.Input,args:["enable-selection"]}],enableFiltering:[{type:t.Input,args:["enable-filtering"]}],bufferAmount:[{type:t.Input,args:["buffer-amount"]}],schemaColumns:[{type:t.Input,args:["schema-columns"]}],afterRendered:[{type:t.Output}],schemaChanges:[{type:t.Output}],columnOptions:[{type:t.ContentChild,args:[V,{"static":!1}]}],columnTemplates:[{type:t.ContentChildren,args:[j]}],contextMenuTemplate:[{type:t.ContentChild,args:[D,{"static":!1}]}],headerTemplate:[{type:t.ContentChild,args:[z,{"static":!1}]}],footerTemplate:[{type:t.ContentChild,args:[B,{"static":!1}]}],filterTemplate:[{type:t.ContentChild,args:[X,{"static":!1}]}]},e}(),J=s.trigger("fadeAnimation",[s.state("in",s.style({opacity:1})),s.transition(":enter",[s.style({opacity:0}),s.animate(150)]),s.transition(":leave",s.animate(150,s.style({opacity:0})))]),ee=function(){function e(e){void 0===e&&(e=[]),this.columns=e}return e.prototype.exportColumns=function(){return this.columns.map(function(e){return{key:e.key,width:e.width,isVisible:e.isVisible,isModel:e.isModel}})},e}(),te=function(){function e(){this.compiledTemplates={}}return e.templateContext=function(t,n,i){return{textBold:n.bold,template:n.template,"class":n.cssClasses,style:n.cssStyles,width:n.width,height:n.height,onClick:n.onClick,dblClick:n.dblClick,useDeepPath:t.includes("."),context:n.row?m.ROW:m.CELL,nowrap:e.getValidPredicate(i.nowrap,n.nowrap)}},e.getValidHtmlBooleanAttribute=function(e){return"string"==typeof e||e},e.getValidPredicate=function(e,t){return null===e?t:e},e.prototype.toggleColumnVisibility=function(e){this.schema.columns=this.schema.columns.map(function(t){return e===t.key?p({},t,{isVisible:!t.isVisible}):t})},e.prototype.initialSchema=function(e){this.schema=this.schema||new ee,this.schema.columns=[],this.compiledTemplates={},this.templateKeys=new Set,this.overrideTemplateKeys=new Set,this.fullTemplateKeys=new Set,this.columnOptions=e||new H},e.prototype.parse=function(e,t){var n=this;t&&t.forEach(function(t){var i=t.key,r=t.customKey,o=t.importantTemplate;(e[i]||!1!==r)&&(!1!==o?(n.templateKeys["delete"](i),n.compileColumnMetadata(t),n.overrideTemplateKeys.add(i)):n.templateKeys.has(i)||n.overrideTemplateKeys.has(i)||(n.compileColumnMetadata(t),n.templateKeys.add(i)),n.fullTemplateKeys.add(i))})},e.prototype.mutateColumnSchema=function(e,t){var n,i;try{for(var r=g(Object.keys(t)),o=r.next();!o.done;o=r.next()){var l=o.value;this.compiledTemplates[e][l]=t[l]}}catch(s){n={error:s}}finally{try{o&&!o.done&&(i=r["return"])&&i.call(r)}finally{if(n)throw n.error}}},e.prototype.compileColumnMetadata=function(t){var n=t.key,i=t.th,r=t.td,o=t.emptyHead,l=t.headTitle,s=t.customKey,a=i||new A(null),c=r||new L(null),u=e.getValidHtmlBooleanAttribute(o),h=e.templateContext(n,a,this.columnOptions);this.compiledTemplates[n]={key:n,th:p({},h,{headTitle:l,emptyHead:u,template:u?null:h.template}),td:e.templateContext(n,c,this.columnOptions),stickyLeft:e.getValidHtmlBooleanAttribute(t.stickyLeft),stickyRight:e.getValidHtmlBooleanAttribute(t.stickyRight),customColumn:e.getValidHtmlBooleanAttribute(t.customKey),width:e.getValidPredicate(t.width,this.columnOptions.width),cssClass:e.getValidPredicate(t.cssClass,this.columnOptions.cssClass)||[],cssStyle:e.getValidPredicate(t.cssStyle,this.columnOptions.cssStyle)||[],resizable:e.getValidPredicate(t.resizable,this.columnOptions.resizable),sortable:e.getValidPredicate(t.sortable,this.columnOptions.sortable),filterable:e.getValidPredicate(t.filterable,this.columnOptions.filterable),draggable:e.getValidPredicate(t.draggable,this.columnOptions.draggable),verticalLine:t.verticalLine,isModel:!1===s,isVisible:!0}},e.decorators=[{type:t.Injectable}],e}(),ne={ASC:"asc",DESC:"desc"};function ie(e){var t="desc",n="skip";function i(e,t){return t?t.split(".").reduce(function(e,t){return e&&e[t]},e):e}return function(){function e(){}return e.sortByKeys=function(t,n){if(!Object.keys(n).length)return t.sort(e.shallowSort);var i=e.getMatchesKeys(n);return t.sort(function(t,n){return e.multiSort(t,n,i)})},e.multiSort=function(t,n,i){for(var r=Object.keys(i).length,o=0,l=0;0===o&&l<r;){var s=e.observeKey(i,l);if(s){var a=i[s];o=e.deepSort(s,t,n,a),l++}}return o},e.getMatchesKeys=function(e){var i={};for(var r in e)e.hasOwnProperty(r)&&(i[r]=e[r]===t||-1===e[r]?-1:e[r]===n||0===e[r]?0:1);return i},e.deepSort=function(e,t,n,r){var o=i(t,e),l=i(n,e);return this.shallowSort(o,l,r)},e.shallowSort=function(e,t,n){var i,r,o=null!==n?n:1;return r="string"==typeof(i=t)?i.trim():i,e===(t=[undefined,null,NaN,"","null",Infinity].includes(r)?"":t)?0:e>t?o:-1*o},e.observeKey=function(e,t){var n,i=0;for(n in e)if(e.hasOwnProperty(n)){if(i===t)return n;i++}return null},e}().sortByKeys(e.source,e.definition)}var re=function(){function e(e,t,n){this.thread=e,this.utils=t,this.zone=n,this.definition={}}return Object.defineProperty(e.prototype,"empty",{get:function(){return 0===Object.keys(this.definition).length},enumerable:!0,configurable:!0}),e.prototype.sort=function(e){var t=this;return new Promise(function(n){t.thread.run(ie,{definition:t.definition,source:e}).then(function(e){t.zone.runOutsideAngular(function(){return window.setTimeout(function(){return n(e)},N.TIME_IDLE)})})})},e.prototype.setDefinition=function(e){this.definition=this.empty?e||{}:this.definition},e.prototype.updateSortKey=function(e){this.definition=this.updateImmutableDefinitions(e)},e.prototype.updateImmutableDefinitions=function(e){var t=this.definition[e];return t?t===ne.ASC?this.definition[e]=ne.DESC:delete this.definition[e]:this.definition[e]=ne.ASC,p({},this.definition)},e.decorators=[{type:t.Injectable}],e.ctorParameters=function(){return[{type:F},{type:T},{type:t.NgZone}]},e}(),oe=function(){function e(){this.isAll=!1,this.entries={},this.map=new Map}return Object.defineProperty(e.prototype,"size",{get:function(){return this.map.size},enumerable:!0,configurable:!0}),e.prototype.generateImmutableEntries=function(){this.entries=Array.from(this.map.entries()).reduce(function(e,t){var n,i=f(t,2),r=i[0],o=i[1];return p({},e,((n={})[r]=o,n))},{})},e.prototype.hasValue=function(){return this.size>0},Object.defineProperty(e.prototype,"isIndeterminate",{get:function(){return this.hasValue()&&!this.isAll},enumerable:!0,configurable:!0}),e.prototype.get=function(e){return this.map.get(e)||!1},e.prototype.select=function(e,t){this.map.set(e,!0),t&&this.generateImmutableEntries()},e.prototype.toggle=function(e,t){this.has(e)?this["delete"](e,t):this.select(e,t)},e.prototype["delete"]=function(e,t){this.map["delete"](e),t&&this.generateImmutableEntries()},e.prototype.has=function(e){return this.map.has(e)},e.prototype.clear=function(){this.map.clear(),this.entries={},this.isAll=!1},e}(),le=function(){function e(){this.start=null,this.end=null}return e.prototype.put=function(e){null===this.start?this.start=e:this.end=e},e.prototype.clear=function(){this.start=null,this.end=null},e.prototype.sortKeys=function(){var e=f([this.start,this.end].sort(function(e,t){return e-t}),2),t=e[0],n=e[1];return this.start=t,this.end=n,this},e.prototype.selectedRange=function(){return null!==this.start&&null!==this.end},e}(),se=function(){function e(e){this.ngZone=e,this.selectionModel=new oe,this.range=new le,this.selectionStart={status:!1},this.primaryKey=b.ID,this.onChanges=new l.Subject,this.handler={}}return e.prototype.listenShiftKey=function(){this.listenShiftKeyByType(_),this.listenShiftKeyByType(x)},e.prototype.unListenShiftKey=function(){this.removeListenerByType(_),this.removeListenerByType(x)},e.prototype.ngOnDestroy=function(){this.unListenShiftKey()},e.prototype.toggleAll=function(e){var t=this;clearInterval(this.selectionTaskIdle),e.length===this.selectionModel.size?this.selectionModel.clear():e.forEach(function(e){return t.selectionModel.select(t.getIdByRow(e),!1)}),this.checkIsAllSelected(e)},e.prototype.toggle=function(e){clearInterval(this.selectionTaskIdle),this.selectionModel.toggle(this.getIdByRow(e),!0),this.onChanges.next()},e.prototype.selectRow=function(e,t,n){var i=this,r=t.shiftKey,o=t.ctrlKey,l=n.findIndex(function(t){return t[i.primaryKey]===e[i.primaryKey]});r?this.multipleSelectByShiftKeydown(l,n):o?this.multipleSelectByCtrlKeydown(e,l):this.singleSelect(e,l),this.checkIsAllSelected(n)},e.prototype.getIdByRow=function(e){var t=e[this.primaryKey];if(S(t))throw new Error('Can\'t select item, make sure you pass the correct primary key, or you forgot enable selection\n                <ngx-table-builder [enable-selection]="true" primary-key="fieldId" />\n                ');return t},e.prototype.shiftKeyDetectSelection=function(e){var t=e.shiftKey;this.selectionStart={status:t}},e.prototype.listenShiftKeyByType=function(e){var t=this;this.ngZone.runOutsideAngular(function(){t.handler[e]=function(e){var n=e.shiftKey;t.selectionStart={status:n}},window.addEventListener(e,t.handler[e],!0)})},e.prototype.removeListenerByType=function(e){window.removeEventListener(e,this.handler[e],!0)},e.prototype.checkIsAllSelected=function(e){this.selectionModel.isAll=e.length===this.selectionModel.size,this.selectionModel.generateImmutableEntries(),this.onChanges.next()},e.prototype.multipleSelectByShiftKeydown=function(e,t){if(this.selectionModel.clear(),this.range.put(e),this.range.selectedRange())for(var n=this.range.sortKeys(),i=n.start,r=n.end,o=i;o<=r;++o)this.selectionModel.select(this.getIdByRow(t[o]),!1)},e.prototype.multipleSelectByCtrlKeydown=function(e,t){this.range.clear(),this.range.start=t,this.selectionModel.toggle(this.getIdByRow(e),!0)},e.prototype.singleSelect=function(e,t){this.selectionModel.clear(),this.selectionModel.select(this.getIdByRow(e),!0),this.range.clear(),this.range.start=t},e.decorators=[{type:t.Injectable}],e.ctorParameters=function(){return[{type:t.NgZone}]},e}(),ae=N.COLUMN_RESIZE_MIN_WIDTH,ce=function(){function e(){}return e.clearSelection=function(){window.getSelection?window.getSelection().removeAllRanges():document.selection&&document.selection.empty()},e.prototype.resize=function(e,t,n,i){var r=this;this.destroyed$=new l.ReplaySubject(1),this.startX=e.pageX,this.startWidth=t.offsetWidth,l.fromEvent(document,"mousemove").pipe(o.takeUntil(this.destroyed$)).subscribe(function(e){return r.computeEvent(e,n)}),l.fromEvent(document,"mouseup").pipe(o.takeUntil(this.destroyed$)).subscribe(function(e){return r.unsubscribe(e,i)})},e.prototype.computeEvent=function(t,n){e.clearSelection();var i=this.startWidth+(t.pageX-this.startX);i>=ae&&n(i)},e.prototype.unsubscribe=function(e,t){this.destroyed$.next(!0),this.destroyed$.complete(),t(e)},e.decorators=[{type:t.Injectable}],e}(),ue=function(){function e(e){this.parser=e}return Object.defineProperty(e.prototype,"columns",{get:function(){return this.parser.schema.columns},enumerable:!0,configurable:!0}),e.prototype.drop=function(e,t){var n=this.columns.findIndex(function(t){return t.key===e}),r=this.columns.findIndex(function(e){return e.key===t});this.canDropped(n,r)&&(r===this.columns.length-1&&(this.columns[r].width=this.columns[n].width,this.columns[n].width=null),i.moveItemInArray(this.columns,n,r))},e.prototype.canDropped=function(e,t){var n=this.columns[e],i=this.columns[t],r=n.draggable,o=i.draggable,l=n.stickyLeft||i.stickyLeft||n.stickyRight||i.stickyRight;return r&&o&&!l},e.decorators=[{type:t.Injectable}],e.ctorParameters=function(){return[{type:te}]},e}(),pe=function(){function e(){this.events=new l.Subject}return e.prototype.update=function(e){this.events.next(e)},e.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],e.ngInjectableDef=t.ɵɵdefineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e}(),he=function(){function e(){this.scrollStatus=new l.Subject}return e.decorators=[{type:t.Injectable}],e}(),de=N.TIME_IDLE,ge=N.TIME_RELOAD,fe=N.FRAME_TIME,me=function(e){function n(t,n,i,r,o,s,a,c,u,p,h,d,g){var f=e.call(this)||this;return f.selection=t,f.templateParser=n,f.cd=i,f.ngZone=r,f.utils=o,f.resize=s,f.sortable=a,f.contextMenu=c,f.app=u,f.filterable=p,f.draggable=h,f.viewChanges=d,f.overloadScroll=g,f.dirty=!0,f.rendering=!1,f.isRendered=!1,f.contentInit=!1,f.contentCheck=!1,f.showedCellByDefault=!0,f.scrollOffset={offset:!1},f.recalculated={recalculateHeight:!1},f.forcedRefresh=!1,f.destroy$=new l.Subject,f.checkedTaskId=null,f}return u(n,e),Object.defineProperty(n.prototype,"selectionEntries",{get:function(){return this.selection.selectionModel.entries},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"sourceExists",{get:function(){return!!this.source&&this.source.length>0},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"viewIsDirty",{get:function(){return this.contentCheck&&!this.forcedRefresh},enumerable:!0,configurable:!0}),n.prototype.checkSourceIsNull=function(){return!("length"in(this.source||{}))},n.prototype.recalculateHeight=function(){this.recalculated={recalculateHeight:!0},this.detectChanges()},n.prototype.ngOnChanges=function(e){var t=this;void 0===e&&(e={});var n=this.sourceExists&&this.getCountKeys()!==this.renderedCountKeys;if(this.sourceIsNull=this.checkSourceIsNull(),this.sortable.setDefinition(this.sortTypes),n){this.renderedCountKeys=this.getCountKeys(),this.customModelColumnsKeys=this.generateCustomModelColumnsKeys(),this.modelColumnKeys=this.generateModelColumnKeys(),this.originalSource=this.source;var i=!this.dirty;this.checkFilterValues(),i&&this.markForCheck(),i&&this.isRendered&&this.contentInit&&this.renderTable()}else v in e&&this.isRendered&&(this.originalSource=e[v].currentValue,this.sortAndFilter().then(function(){return t.reCheckDefinitions()}));if(w in e&&!e[w].currentValue)throw new Error('You need set correct <ngx-table-builder [schema-columns]="[] || [..]" /> for one time binding')},n.prototype.markForCheck=function(){this.contentCheck=!0},n.prototype.ngOnInit=function(){this.enableSelection&&(this.selection.primaryKey=this.primaryKey,this.selection.listenShiftKey())},n.prototype.updateScrollOffset=function(e){this.scrollOffset={offset:e},this.idleDetectChanges()},n.prototype.markVisibleColumn=function(e,t){e.visible=t,this.detectChanges()},n.prototype.ngAfterContentInit=function(){this.markDirtyCheck(),this.markTemplateContentCheck(),this.sourceExists&&this.render()},n.prototype.ngAfterViewInit=function(){this.listenTemplateChanges(),this.listenSelectionChanges(),this.recheckTemplateChanges(),this.listenScrollEvents()},n.prototype.ngAfterViewChecked=function(){this.viewIsDirty&&this.viewForceRefresh()},n.prototype.ngOnDestroy=function(){this.templateParser.schema=null,this.destroy$.next(!0),this.destroy$.unsubscribe()},n.prototype.markTemplateContentCheck=function(){this.contentInit=!!this.source||!(this.columnTemplates&&this.columnTemplates.length)},n.prototype.markDirtyCheck=function(){this.dirty=!1},n.prototype.generateColumnsKeyMap=function(e){var t={};return e.forEach(function(e){return t[e]=!0}),t},n.prototype.render=function(){var e=this;this.contentCheck=!1,this.utils.macrotask(function(){return e.renderTable()},de).then(function(){return e.idleDetectChanges()})},n.prototype.renderTable=function(e){var t=this,n=(void 0===e?{async:!0}:e).async;if(!this.rendering){this.rendering=!0;var i=this.generateDisplayedColumns(),r=this.asyncColumns&&n?this.asyncDrawColumns.bind(this):this.syncDrawColumns.bind(this);this.sortable.empty?r(i).then(function(){return t.emitRendered()}):this.sortAndFilter().then(function(){return r(i).then(function(){return t.emitRendered()})})}},n.prototype.toggleColumnVisibility=function(e){var t=this;this.recheckViewportChecked(),this.templateParser.toggleColumnVisibility(e),this.utils.requestAnimationFrame(function(){t.changeSchema(),t.recheckViewportChecked()}).then(function(){return t.app.tick()})},n.prototype.resetSchema=function(){var e=this;this.tableViewportChecked=!1,this.schemaColumns=null,this.detectChanges(),this.renderTable({async:!1}),this.changeSchema([]),this.ngZone.runOutsideAngular(function(){window.setTimeout(function(){e.tableViewportChecked=!0,e.detectChanges()},N.TIME_IDLE)})},n.prototype.listenScrollEvents=function(){var e=this;this.overloadScroll.scrollStatus.pipe(o.takeUntil(this.destroy$)).subscribe(function(t){e.isScrolling=t,e.detectChanges()})},n.prototype.checkFilterValues=function(){var e=this;this.enableFiltering&&(this.filterable.filterType=this.filterable.filterType||this.columnOptions&&this.columnOptions.filterType||P.START_WITH,this.modelColumnKeys.forEach(function(t){e.filterable.filterTypeDefinition[t]=e.filterable.filterTypeDefinition[t]||e.filterable.filterType}))},n.prototype.recheckTemplateChanges=function(){var e=this;this.ngZone.runOutsideAngular(function(){return window.setTimeout(function(){return e.app.tick()},ge)})},n.prototype.listenSelectionChanges=function(){var e=this;this.enableSelection&&this.selection.onChanges.pipe(o.takeUntil(this.destroy$)).subscribe(function(){e.detectChanges(),e.ngZone.runOutsideAngular(function(){return window.requestAnimationFrame(function(){e.detectChanges(),e.app.tick()})})})},n.prototype.viewForceRefresh=function(){var e=this;this.ngZone.runOutsideAngular(function(){window.clearTimeout(e.checkedTaskId),e.checkedTaskId=window.setTimeout(function(){e.forcedRefresh=!0,e.markTemplateContentCheck(),e.render()},fe)})},n.prototype.listenTemplateChanges=function(){var e=this;this.columnTemplates&&this.columnTemplates.changes.pipe(o.takeUntil(this.destroy$)).subscribe(function(){e.markForCheck(),e.markTemplateContentCheck()}),this.contextMenuTemplate&&this.contextMenu.events.pipe(o.takeUntil(this.destroy$)).subscribe(function(){return e.detectChanges()})},n.prototype.asyncDrawColumns=function(e){return h(this,void 0,void 0,function(){var t,n,i,r=this;return d(this,function(o){switch(o.label){case 0:t=function(t){var i,o;return d(this,function(l){switch(l.label){case 0:return i=e[t],(o=n.mergeColumnSchema(i,t)).isVisible?[4,n.utils.requestAnimationFrame(function(){r.processedColumnList&&r.processedColumnList(o,i,!0)})]:[3,2];case 1:return l.sent(),[3,3];case 2:n.processedColumnList(o,i,!0),l.label=3;case 3:return[2]}})},n=this,i=0,o.label=1;case 1:return i<e.length?[5,t(i)]:[3,4];case 2:o.sent(),o.label=3;case 3:return i++,[3,1];case 4:return[2]}})})},n.prototype.syncDrawColumns=function(e){return h(this,void 0,void 0,function(){var t=this;return d(this,function(n){switch(n.label){case 0:return[4,this.utils.microtask(function(){for(var n=0;n<e.length;n++){var i=e[n],r=t.mergeColumnSchema(i,n);t.processedColumnList(r,e[n],!1)}})];case 1:return n.sent(),[2]}})})},n.prototype.getCustomColumnSchemaByIndex=function(e){return this.schemaColumns&&this.schemaColumns[e]||{}},n.prototype.mergeColumnSchema=function(e,t){var n=this.getCustomColumnSchemaByIndex(t);if(!this.templateParser.compiledTemplates[e]){var i=(new j).withKey(e);this.templateParser.compileColumnMetadata(i)}var r=this.templateParser.compiledTemplates[e];return n.key===r.key&&(this.templateParser.compiledTemplates[e]=p({},r,n)),this.templateParser.compiledTemplates[e]},n.prototype.processedColumnList=function(e,t,n){this.templateParser.schema.columns.push(this.templateParser.compiledTemplates[t]),n&&this.idleDetectChanges()},n.prototype.emitRendered=function(){this.isRendered=!0,this.rendering=!1,this.afterRendered.emit(this.isRendered),this.recalculateHeight()},n.prototype.generateDisplayedColumns=function(){this.templateParser.initialSchema(this.columnOptions);var e=this.parseTemplateKeys(),t=e.simpleRenderedKeys,n=e.allRenderedKeys;return this.schemaColumns&&this.schemaColumns.length?this.schemaColumns.map(function(e){return e.key}):this.keys.length?this.customModelColumnsKeys:t.size?n:this.modelColumnKeys},n.prototype.parseTemplateKeys=function(){var e=this.keys.length?this.generateColumnsKeyMap(this.customModelColumnsKeys):this.generateColumnsKeyMap(this.modelColumnKeys);return this.templateParser.parse(e,this.columnTemplates),{allRenderedKeys:Array.from(this.templateParser.fullTemplateKeys),overridingRenderedKeys:this.templateParser.overrideTemplateKeys,simpleRenderedKeys:this.templateParser.templateKeys}},n.decorators=[{type:t.Component,args:[{selector:"ngx-table-builder",template:'<div\r\n    #root\r\n    observerView\r\n    [style.width]="width"\r\n    class="table-grid__root"\r\n    [style.height.px]="height"\r\n    [class.table-grid__root--is-rendered]="isRendered"\r\n    [class.table-grid__root--is-scrolling]="isScrolling"\r\n    [class.table-grid__root-auto-height]="autoHeightDetect"\r\n    [class.table-grid__no-display]="!(columnSchema.length > 0)"\r\n    [class.table-grid__root--content-is-init]="contentInit && inViewport"\r\n    [class.table-grid__root--is-scroll-overload]="tableViewport.scrollWidth > tableViewport.clientWidth"\r\n    [class.table-grid__root--empty-list]="!source?.length && !filterable.filtering && !isFrozenView"\r\n    [class.table-grid__root--visible]="contentInit && root.offsetHeight > clientRowHeight && columnHeight"\r\n    (contextmenu)="contextMenuTemplate ? contextMenu.openContextMenu($event) : null"\r\n    (recalculatedHeight)="recalculateHeight()"\r\n    (observeVisible)="checkVisible($event)"\r\n    [autoHeight]="{\r\n        detect: autoHeightDetect,\r\n        height: height,\r\n        inViewport: inViewport,\r\n        columnHeight: columnHeight,\r\n        statusRendered: isRendered,\r\n        sourceLength: source?.length || 0\r\n    }"\r\n    [headerHeight]="headerRef?.nativeElement.clientHeight"\r\n    [footerHeight]="footerRef?.nativeElement.clientHeight"\r\n>\r\n    <div\r\n        cdkDropList\r\n        #tableViewport\r\n        class="table-grid"\r\n        [wheelThrottling]="tableViewport"\r\n        [cdkDropListDisabled]="!accessDragging"\r\n        (scrollOffset)="updateScrollOffset($event)"\r\n        [class.table-grid__scroll-offset]="scrollOffset.offset"\r\n        [class.table-grid__native-scrollbar]="nativeScrollbar"\r\n        cdkDropListOrientation="horizontal"\r\n        (cdkDropListDropped)="drop($event)"\r\n    >\r\n        <div class="table-grid__header-sticky" *ngIf="headerTemplate" #header>\r\n            <ng-content select="ngx-header"></ng-content>\r\n        </div>\r\n\r\n        <div\r\n            class="table-grid__column-area-content"\r\n            [style.width.px]="\r\n                tableViewportChecked && tableViewport.scrollWidth > tableViewport.clientWidth\r\n                    ? tableViewport.scrollWidth\r\n                    : null\r\n            "\r\n        >\r\n            <ng-container *ngFor="let columnSchema of columnSchema; let index = index">\r\n                <div\r\n                    #column\r\n                    cdkDrag\r\n                    observerView\r\n                    cdkDragHandle\r\n                    *ngIf="columnSchema.isVisible"\r\n                    [attr.column-id]="columnSchema.key"\r\n                    [rendered]="isRendered"\r\n                    [cdkDragDisabled]="!accessDragging"\r\n                    class="table-grid__column"\r\n                    [style.height.px]="columnHeight"\r\n                    [ngStyle]="columnSchema?.cssStyle"\r\n                    [ngClass]="columnSchema?.cssClass"\r\n                    cdkDragBoundary=".table-grid__column-area-content"\r\n                    [style.max-width.px]="columnSchema?.width || clientColWidth"\r\n                    [style.width.px]="columnSchema?.width || clientColWidth"\r\n                    [style.min-width.px]="columnSchema?.width || clientColWidth"\r\n                    [class.table-grid__column--with-footer-content]="footerTemplate"\r\n                    [class.table-grid__column--vertical-line]="verticalBorder || columnSchema?.verticalLine"\r\n                    [class.table-grid__column--custom-column]="columnSchema?.customColumn"\r\n                    [class.table-grid__column--selected-all]="selection.selectionModel.isAll"\r\n                    [class.table-grid__column--sticky-left]="columnSchema?.stickyLeft"\r\n                    [class.table-grid__column--sticky-right]="columnSchema?.stickyRight"\r\n                    [class.table-grid__column--is-visible]="column[\'visible\']"\r\n                    [class.table-grid__column--is-invisible]="!column[\'visible\']"\r\n                    [class.table-grid__column--is-dragging]="isDragging[columnSchema.key]"\r\n                    [class.table-grid__column--default-width]="!autoWidth"\r\n                    [class.table-grid__column--filter-enable]="filterTemplate"\r\n                    (observeVisible)="markVisibleColumn(column, $event)"\r\n                >\r\n                    <div\r\n                        [@fadeAnimation]\r\n                        class="table-grid__column-area"\r\n                        *ngIf="asyncColumns === false || column[\'visible\']"\r\n                    >\r\n                        <table-thead\r\n                            [column-schema]="columnSchema"\r\n                            (mouseleave)="disableDragging()"\r\n                            [header-top]="headerRef?.nativeElement.offsetHeight || 0"\r\n                            [sortable-definition]="sortable.definition"\r\n                            [filterable-definition]="filterable.definition"\r\n                            [client-row-height]="clientRowHeight"\r\n                            (resize)="resizeColumn($event, column)"\r\n                            (sortByKey)="sortByKey($event)"\r\n                        >\r\n                            <div\r\n                                slot="draggable"\r\n                                *ngIf="columnSchema?.draggable"\r\n                                class="table-grid__column--draggable"\r\n                                (mouseenter)="enableDragging(columnSchema.key)"\r\n                                [class.table-grid__column--draggable--handle-hidden]="scrollOffset.offset"\r\n                            >\r\n                                <drag-icon></drag-icon>\r\n                            </div>\r\n                        </table-thead>\r\n\r\n                        <table-tbody\r\n                            [source]="source"\r\n                            [striped]="striped"\r\n                            [column-index]="index"\r\n                            [is-rendered]="isRendered"\r\n                            [primary-key]="primaryKey"\r\n                            [is-firefox]="isFirefoxMode"\r\n                            [recalculated]="recalculated"\r\n                            [buffer-amount]="bufferAmount"\r\n                            [column-schema]="columnSchema"\r\n                            [table-viewport]="tableViewport"\r\n                            [context-menu]="contextMenuTemplate"\r\n                            [enable-selection]="enableSelection"\r\n                            [client-row-height]="clientRowHeight"\r\n                            [selection-entries]="selectionEntries"\r\n                            [showed-cell-by-default]="showedCellByDefault"\r\n                            [column-virtual-height]="columnVirtualHeight"\r\n                        >\r\n                        </table-tbody>\r\n                    </div>\r\n                </div>\r\n            </ng-container>\r\n        </div>\r\n\r\n        <div class="table-grid__footer-sticky" *ngIf="footerTemplate && isRendered" #footer [@fadeAnimation]>\r\n            <ng-content select="ngx-footer"></ng-content>\r\n        </div>\r\n    </div>\r\n\r\n    <div *ngIf="isFrozenView" class="freeze"></div>\r\n</div>\r\n\r\n<ng-template [ngIf]="contextMenuTemplate && contextMenu.state.opened">\r\n    <ng-content select="ngx-context-menu"></ng-content>\r\n</ng-template>\r\n\r\n<div *ngIf="(source && source.length) === 0 && !filterable.filtering">\r\n    <ng-content select="ngx-empty"></ng-content>\r\n</div>\r\n\r\n<div *ngIf="sourceIsNull">\r\n    <ng-content select="ngx-source-null"></ng-content>\r\n</div>\r\n\r\n<ng-template [ngIf]="filterTemplate">\r\n    <ng-content select="ngx-filter"></ng-content>\r\n</ng-template>\r\n',changeDetection:t.ChangeDetectionStrategy.OnPush,providers:[te,re,se,ce,I,$,ue,he],encapsulation:t.ViewEncapsulation.None,animations:[J],styles:['@-webkit-keyframes slide{0%{-webkit-transform:translateX(-100%);transform:translateX(-100%)}100%{-webkit-transform:translateX(100%);transform:translateX(100%)}}.table-grid:not(.table-grid__native-scrollbar){color:transparent;transition:color .3s;background:#fff}.table-grid:not(.table-grid__native-scrollbar)::-webkit-scrollbar,.table-grid:not(.table-grid__native-scrollbar)::-webkit-scrollbar-thumb{width:10px;border-radius:10px;background-clip:padding-box;border:2px solid transparent;height:12px}.table-grid:not(.table-grid__native-scrollbar)::-webkit-scrollbar-thumb{box-shadow:inset 0 0 0 10px;background:0 0}.table-grid:not(.table-grid__native-scrollbar):hover{color:rgba(0,0,0,.2)}.table-grid__column{width:100%;box-sizing:border-box;z-index:1;touch-action:initial!important;-webkit-user-drag:initial!important;-webkit-tap-highlight-color:initial!important;-webkit-user-select:initial!important;-moz-user-select:initial!important;-ms-user-select:initial!important;user-select:initial!important}.table-grid__column--sticky-left,.table-grid__column--sticky-right{position:-webkit-sticky;position:sticky;background:#fff;will-change:auto;z-index:100}.table-grid__column--sticky-left{left:0}.table-grid__column--sticky-right{right:0}.table-grid__column--selected-all{background:#fff3ad}.table-grid__column--default-width{min-width:200px}.table-grid__column--resize{height:100%;width:10px;position:absolute;background:0 0;cursor:ew-resize;right:0;top:0;display:flex;align-items:center;justify-content:center}.table-grid__column--resize--line{height:70%;width:2px;vertical-align:middle;background:#e0e0e0;display:flex}.table-grid__column:last-child .table-grid__column--resize{display:none}.table-grid__column--vertical-line{border-right:1px solid #e0e0e0}.table-grid__column--vertical-line:last-child{border-left:1px solid #e0e0e0;border-right:none}.table-grid__column--vertical-line:nth-last-child(2){border-right:none}.table-grid__column--draggable,.table-grid__column--filterable,.table-grid__column--sortable{width:24px;height:20px;font-size:12px;opacity:.2;transition:.2s ease-in-out;-webkit-transform:rotate(180deg);transform:rotate(180deg)}.table-grid__column--draggable-active,.table-grid__column--filterable-active,.table-grid__column--sortable-active{opacity:1}.table-grid__column--draggable:hover,.table-grid__column--filterable:hover,.table-grid__column--sortable:hover{opacity:1;cursor:pointer}.table-grid__column--filter-enable .table-grid__column--filterable{display:table-cell}.table-grid__column--filterable{display:none}.table-grid__column--draggable{opacity:0}.table-grid__column--draggable--handle-hidden{visibility:hidden}.table-grid__column--draggable-active{opacity:.8}.table-grid__column--filterable,.table-grid__column--sortable-desc{-webkit-transform:rotate(0);transform:rotate(0)}.table-grid__cell--content-sortable{cursor:pointer}.table-grid__cell--content-sortable:hover+.table-grid__column--sortable:not(.table-grid__column--sortable-active){transition:opacity .2s ease-in-out;opacity:.5}.table-grid .table-grid__column:last-child{width:100%!important;max-width:initial!important}.table-grid__column:not(table-grid__column--vertical-line).table-grid__column--is-dragging{border-right:1px solid #e0e0e0}.table-grid__column--vertical-line .table-grid__column--resize--line{display:none}[draggable=true]{user-select:none;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none}.table-grid__root{opacity:.0012;overflow:hidden;position:relative;border:1px solid transparent;transition:opacity .2s ease-in-out;-webkit-transform:translate(0);transform:translate(0)}.table-grid__root.table-grid__root--visible{box-shadow:0 0 10px -2px #e0e0e0;border:1px solid #e0e0e0}.table-grid__root.table-grid__root--content-is-init{opacity:.4}.table-grid__root.table-grid__root--is-rendered{opacity:1}.table-grid__root-auto-height{height:0}.table-grid__root--is-scrolling table-cell,.table-grid__root--is-scrolling table-tbody,.table-grid__root:not(.table-grid__root--is-rendered) table-cell,.table-grid__root:not(.table-grid__root--is-rendered) table-tbody{pointer-events:none}.table-grid__root:not(.table-grid__root--is-rendered){cursor:wait}.table-grid__root--empty-list{-webkit-transform:translate(9999px)!important;transform:translate(9999px)!important;border:none!important;opacity:0!important;height:0!important}.scrollable-content{height:unset!important;will-change:auto;-webkit-backface-visibility:hidden;backface-visibility:hidden}.table-grid__cell--content,.table-grid__column--draggable,.table-grid__column--filterable,.table-grid__column--sortable,.vertical-align{vertical-align:middle;margin:auto 0;box-sizing:border-box}table-tbody{display:block}.freeze{top:0;left:0;z-index:1000;position:absolute;width:100%;height:100%}.freeze:after{content:"";top:0;-webkit-transform:translateX(100%);transform:translateX(100%);width:100%;height:100%;position:absolute;z-index:1;-webkit-animation:1.4s infinite slide;animation:1.4s infinite slide;background:linear-gradient(to right,rgba(255,255,255,0) 0,rgba(255,255,255,.7) 50%,rgba(128,186,232,0) 99%,rgba(125,185,232,0) 100%)}@keyframes slide{0%{-webkit-transform:translateX(-100%);transform:translateX(-100%)}100%{-webkit-transform:translateX(100%);transform:translateX(100%)}}.filter-founded{border-bottom:1px dotted #000}table-cell{margin:0 auto;width:100%}.table-grid__header-cell{top:0;z-index:100;position:-webkit-sticky;position:sticky;background:#fff;box-sizing:border-box;text-overflow:ellipsis;border-bottom:1px solid #e0e0e0;transition:box-shadow .3s ease-in-out}.table-grid__header-cell--content{overflow:hidden}.table-grid__header-cell:hover .table-grid__column--draggable{opacity:.2}table-tbody .table-grid__cell:last-child{border-bottom:none}.table-grid__cell{color:#000;width:100%;box-sizing:border-box;text-align:center;word-break:break-word;border-bottom:1px solid #e0e0e0;min-height:45px;max-height:45px;display:flex;overflow:hidden;justify-content:center;padding:5px 20px}.table-grid__cell--custom-cell{padding:0}.table-grid__cell--content{overflow:hidden}.table-grid__cell--content:not(.table-grid__cell--content-sortable){width:100%}.table-grid__cell--content .table-grid__cell--inner-content{overflow:hidden}.table-grid__cell--text-bold{font-weight:700}.table-grid__cell--nowrap,.table-grid__cell--nowrap .table-grid__cell--inner-content{white-space:nowrap;text-overflow:ellipsis}.table-grid__cell--enable-selection{cursor:pointer}.table-grid__cell--strip{background:#f7f7fc}.table-grid__cell--selected{background:#fff3ad}.table-grid__cell--settings{margin-left:10px;display:flex;justify-content:center;align-items:center}.table-grid__cell-overflow-content{position:fixed;background:#fff;padding:10px;border-radius:4px;box-shadow:0 0 10px 2px #e0e0e0;opacity:0;z-index:1;visibility:hidden;white-space:pre-wrap;word-break:break-word;line-height:20px;transition:visibility .1s linear,opacity .1s linear;-webkit-transform:translate(-9999px);transform:translate(-9999px);max-height:300px;max-width:300px;overflow:auto;overflow-x:hidden;margin-top:-10px;margin-left:-50px;font-weight:400;font-size:15px}.table-grid__cell-overflow-content.text-center{text-align:center}.table-grid__cell-overflow-content.visible{visibility:visible;transition:visibility .1s linear,opacity .1s linear;opacity:1;-webkit-transform:translate(0);transform:translate(0)}.cdk-drag-preview .table-grid__header-cell{top:0!important}.table-grid-icon--draggable,.table-grid-icon--sortable{width:24px;height:20px}.table-grid-icon--draggable{cursor:move}.table-grid-icon--filterable{width:20px;height:20px;line-height:20px}.cdk-drag-preview{background:#fff;box-sizing:border-box;border-radius:4px;box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.cdk-drag-placeholder{opacity:0}.table-grid__root--is-rendered .table-grid{overflow:auto;overflow-y:auto}.table-grid{position:relative;overflow:hidden;background:#fff;will-change:auto;scroll-behavior:smooth;overflow-x:visible;height:100%}.table-grid__column-area-content{display:flex}.table-grid__footer-sticky,.table-grid__header-sticky{background:#fff;position:-webkit-sticky;position:sticky;z-index:1000;width:100%}.table-grid__header-sticky{top:0;left:0}.table-grid__footer-sticky{bottom:0;left:0}.table-grid__footer-sticky .table-grid__table-content-place{border-top:1px solid #e0e0e0;border-bottom:none}.table-grid__column--with-footer-content table-tbody .table-grid__cell:last-child{border-bottom:none}.table-grid__table-content-place{color:#000;border-bottom:1px solid #e0e0e0}.table-grid__table-content-place--content-cell{box-sizing:border-box;display:flex;overflow:hidden;padding:5px 20px}.table-grid__table-content-place--content-cell .content-box{display:flex;vertical-align:middle;box-sizing:border-box;margin:auto 0}.table-grid__table-content-place--align-center{justify-content:center;text-align:center}.table-grid__table-content-place--align-center .content-box{text-align:center}.table-grid__table-content-place--bold{font-weight:700}.table-grid__cell--inner-content{opacity:0;visibility:hidden;will-change:opacity;transition:visibility .5s ease-in-out,opacity .5s ease-in-out}.table-grid__scroll-offset .table-grid__header-cell{transition:box-shadow .3s ease-in-out;box-shadow:0 3px 2px -2px #e0e0e0}.loaded,.table-grid__scroll-offset .table-grid__cell--inner-content{visibility:visible;opacity:1}.table-grid__scroll-offset .table-grid__cell--inner-content{transition-duration:0s}.table-grid__no-display{opacity:.012!important}']}]}],n.ctorParameters=function(){return[{type:se},{type:te},{type:t.ChangeDetectorRef},{type:t.NgZone},{type:T},{type:ce},{type:re},{type:I},{type:t.ApplicationRef},{type:$},{type:ue},{type:pe},{type:he}]},n.propDecorators={headerRef:[{type:t.ViewChild,args:["header",{"static":!1}]}],footerRef:[{type:t.ViewChild,args:["footer",{"static":!1}]}]},n}(Q),ye=N.TIME_IDLE,be=function(){function e(e,n,i){this.options=e,this.ngZone=n,this.overload=i,this.scrollOffset=new t.EventEmitter,this.scrollTopOffset=!1,this.isScrolling=null,this.scrolling=!1}return Object.defineProperty(e.prototype,"element",{get:function(){return this.wheelThrottling},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){var e=this;this.subscription=l.fromEvent(this.element,"wheel").subscribe(function(t){return e.onElementScroll(t)})},e.prototype.ngOnDestroy=function(){this.subscription.unsubscribe(),this.wheelThrottling=null,this.scrollOffset=null},e.prototype.onElementScroll=function(e){var t=this;this.scrollStart(),this.ngZone.runOutsideAngular(function(){window.clearTimeout(t.isScrolling),t.isScrolling=window.setTimeout(function(){t.element.scrollTop>0&&!t.scrollTopOffset?(t.scrollTopOffset=!0,t.scrollOffset.emit(t.scrollTopOffset)):0===t.element.scrollTop&&t.scrollTopOffset&&(t.scrollTopOffset=!1,t.scrollOffset.emit(t.scrollTopOffset)),t.scrollEnd()},ye)})},e.prototype.scrollStart=function(){this.scrolling||(this.scrolling=!0,this.overload.scrollStatus.next(this.scrolling))},e.prototype.scrollEnd=function(){this.scrolling=!1,this.overload.scrollStatus.next(this.scrolling)},e.decorators=[{type:t.Directive,args:[{selector:"[wheelThrottling]"}]}],e.ctorParameters=function(){return[{type:N,decorators:[{type:t.Inject,args:[y]}]},{type:t.NgZone},{type:he}]},e.propDecorators={wheelThrottling:[{type:t.Input}],scrollOffset:[{type:t.Output}]},e}(),ve=function(){function e(e,t){this.selection=e,this.utils=t}return e.prototype.generateTableCellInfo=function(e,t,n){var i=this;return{row:e,event:n,value:k(e,t),preventDefault:function(){window.clearInterval(i.selection.selectionTaskIdle)}}},e.propDecorators={isRendered:[{type:t.Input,args:["is-rendered"]}],columnIndex:[{type:t.Input,args:["column-index"]}],clientRowHeight:[{type:t.Input,args:["client-row-height"]}],columnSchema:[{type:t.Input,args:["column-schema"]}]},e}(),we=function(e){function n(n,i,r){var o=e.call(this,n,i)||this;return o.selection=n,o.utils=i,o.filterable=r,o.resize=new t.EventEmitter,o.sortByKey=new t.EventEmitter,o.orderType=ne,o}return u(n,e),n.prototype.openFilter=function(e,t){this.filterable.openFilter(e,t)},n.decorators=[{type:t.Component,args:[{selector:"table-thead",template:'<div\r\n    #parent\r\n    [style.top.px]="headerTop"\r\n    class="table-grid__cell table-grid__header-cell"\r\n    [class.table-grid__cell--custom-cell]="columnSchema?.customColumn"\r\n    [class.table-grid__cell--text-bold]="columnSchema?.th?.textBold"\r\n    [class.table-grid__cell--resizable]="columnSchema?.resizable"\r\n    [style.min-height.px]="columnSchema?.th?.height || clientRowHeight"\r\n    [style.max-height.px]="columnSchema?.th?.height || clientRowHeight"\r\n    [ngClass]="columnSchema?.th?.class"\r\n    [ngStyle]="columnSchema?.th?.style"\r\n>\r\n    <div\r\n        #divElement\r\n        [parent]="parent"\r\n        [text-center]="true"\r\n        [overflowTooltip]="divElement"\r\n        class="table-grid__cell--content table-grid__header-cell--content"\r\n        [class.table-grid__cell--content-sortable]="columnSchema?.sortable"\r\n        [class.table-grid__cell--nowrap]="columnSchema?.th?.nowrap"\r\n        (click)="columnSchema?.sortable ? sortByKey.emit(columnSchema.key) : null"\r\n    >\r\n        <ng-template\r\n            [ngIf]="columnSchema?.th?.template"\r\n            [ngTemplateOutlet]="columnSchema?.th?.template"\r\n            [ngIfElse]="defaultTh"\r\n        ></ng-template>\r\n        <ng-template #defaultTh>\r\n            <ng-template [ngIf]="!columnSchema?.th?.emptyHead">\r\n                {{ columnSchema?.th?.headTitle || (columnSchema.key | titlecase) }}\r\n            </ng-template>\r\n        </ng-template>\r\n    </div>\r\n\r\n    <div\r\n        *ngIf="!columnSchema?.customColumn && columnSchema?.sortable"\r\n        class="table-grid__column--sortable"\r\n        [class.table-grid__column--sortable-active]="sortableDefinition[columnSchema.key]"\r\n        [class.table-grid__column--sortable-asc]="sortableDefinition[columnSchema.key] === orderType.ASC"\r\n        [class.table-grid__column--sortable-desc]="sortableDefinition[columnSchema.key] === orderType.DESC"\r\n        (click)="columnSchema?.sortable ? sortByKey.emit(columnSchema.key) : null"\r\n    >\r\n        <img\r\n            class="table-grid-icon--sortable"\r\n            src=\'data:image/svg+xml;utf8,<svg id="Layer_1" style="enable-background:new 0 0 512 512;" version="1.1" viewBox="0 0 512 512" width="512px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M128.4,189.3L233.4,89c5.8-6,13.7-9,22.4-9c8.7,0,16.5,3,22.4,9l105.4,100.3c12.5,11.9,12.5,31.3,0,43.2  c-12.5,11.9-32.7,11.9-45.2,0L288,184.4v217c0,16.9-14.3,30.6-32,30.6c-17.7,0-32-13.7-32-30.6v-217l-50.4,48.2  c-12.5,11.9-32.7,11.9-45.2,0C115.9,220.6,115.9,201.3,128.4,189.3z"/></svg>\'\r\n            alt="sort"\r\n        />\r\n    </div>\r\n\r\n    <div\r\n        class="table-grid__column--filterable"\r\n        [class.table-grid__column--filterable-active]="filterableDefinition[columnSchema.key]"\r\n        *ngIf="!columnSchema?.customColumn && columnSchema?.filterable"\r\n        (click)="columnSchema?.filterable ? openFilter(columnSchema.key, $event) : null"\r\n    >\r\n        <svg\r\n            class="table-grid-icon--filterable"\r\n            fill="none"\r\n            height="24"\r\n            stroke="#000"\r\n            stroke-linecap="round"\r\n            stroke-linejoin="round"\r\n            stroke-width="2"\r\n            viewBox="0 0 24 24"\r\n            width="24"\r\n            xmlns="http://www.w3.org/2000/svg"\r\n        >\r\n            <polygon points="22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"></polygon>\r\n        </svg>\r\n    </div>\r\n\r\n    <ng-template [ngIf]="!columnSchema.customColumn">\r\n        <ng-content select="[slot=draggable]"></ng-content>\r\n    </ng-template>\r\n\r\n    <div\r\n        *ngIf="columnSchema?.resizable"\r\n        class="table-grid__column--resize"\r\n        (mousedown)="resize.emit({ event: $event, key: columnSchema.key })"\r\n    >\r\n        <div class="table-grid__column--resize--line"></div>\r\n    </div>\r\n</div>\r\n',changeDetection:t.ChangeDetectionStrategy.OnPush,encapsulation:t.ViewEncapsulation.None}]}],n.ctorParameters=function(){return[{type:se},{type:T},{type:$}]},n.propDecorators={headerTop:[{type:t.Input,args:["header-top"]}],sortableDefinition:[{type:t.Input,args:["sortable-definition"]}],filterableDefinition:[{type:t.Input,args:["filterable-definition"]}],resize:[{type:t.Output}],sortByKey:[{type:t.Output}]},n}(ve),_e=function(e){function n(t,n,i,r,o,s,a){var c=e.call(this,t,s)||this;return c.selection=t,c.cd=n,c.contextMenu=i,c.options=r,c.ngZone=o,c.utils=s,c.overload=a,c.destroy$=new l.Subject,c}return u(n,e),Object.defineProperty(n.prototype,"clientBufferAmount",{get:function(){return Number(this.bufferAmount)||this.options.bufferAmount},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"canSelectTextInTable",{get:function(){return!this.selection.selectionStart.status},enumerable:!0,configurable:!0}),n.prototype.ngOnChanges=function(e){"recalculated"in e&&!e.recalculated.firstChange&&this.scroll&&this.scroll.invalidateAllCachedMeasurements()},n.prototype.ngOnInit=function(){var e=this;this.overload.scrollStatus.pipe(o.filter(function(e){return!e}),o.takeUntil(this.destroy$)).subscribe(function(){return e.refresh()})},n.prototype.ngOnDestroy=function(){this.destroy$.next(!0),this.destroy$.unsubscribe();var e=this.scroll;e.removeScrollEventHandlers(),e.wrapGroupDimensions=null,e.parentScroll=null,e.viewPortItems=null,e.items=null,e.invalidateAllCachedMeasurements=function(){},e.calculateViewport=function(){return{startIndex:0,scrollLength:0}},e.previousViewPort={startIndex:0,scrollLength:0},e.invisiblePaddingElementRef={nativeElement:null},e.getScrollStartPosition=function(){return 0},e.calculateDimensions=function(){},e.refresh_internal=function(){},e.element={nativeElement:null},e.contentElementRef=null,e._items=null,e.zone=null,this.destroy$=null,this.scroll=null},n.prototype.openContextMenu=function(e,t,n){this.contextMenuTemplate&&(this.enableSelection&&!this.checkSelectedItem(n)&&this.selection.selectRow(n,e,this.source),this.contextMenu.openContextMenu(e,t,n))},n.prototype.handleDblClick=function(e,t,n,i){window.clearInterval(this.selection.selectionTaskIdle),this.handleEventEmitter(e,t,n,i)},n.prototype.handleOnClick=function(e,t,n,i){var r=this;this.ngZone.runOutsideAngular(function(){r.enableSelection&&(r.selection.selectionTaskIdle=window.setTimeout(function(){r.selection.selectRow(e,n,r.source),n.preventDefault(),O(r.cd)}))}),this.handleEventEmitter(e,t,n,i)},n.prototype.vsChange=function(){O(this.cd)},n.prototype.refresh=function(){var e=this;this.ngZone.runOutsideAngular(function(){window.clearTimeout(e.reloadTaskId),e.reloadTaskId=window.setTimeout(function(){e.scroll&&(e.scroll.invalidateAllCachedMeasurements(),O(e.cd))},N.MACRO_TIME)})},n.prototype.handleEventEmitter=function(e,t,n,i){var r=this;i&&this.ngZone.runOutsideAngular(function(){window.setTimeout(function(){i.emit(r.generateTableCellInfo(e,t,n))})})},n.prototype.checkSelectedItem=function(e){return this.selection.selectionModel.get(e[this.primaryKey])},n.decorators=[{type:t.Component,args:[{selector:"table-tbody",template:'<virtual-scroller\r\n    #scroll\r\n    [items]="source"\r\n    [stripedTable]="true"\r\n    [checkResizeInterval]="0"\r\n    [parentScroll]="tableViewport"\r\n    [enableUnequalChildrenSizes]="true"\r\n    [bufferAmount]="clientBufferAmount"\r\n    [resizeBypassRefreshThreshold]="0"\r\n    [useMarginInsteadOfTranslate]="true"\r\n    [executeRefreshOutsideAngularZone]="true"\r\n    [modifyOverflowStyleOfParentScroll]="false"\r\n    [style.height.px]="columnVirtualHeight"\r\n    (vsChange)="vsChange()"\r\n>\r\n    <div\r\n        #parent\r\n        class="table-grid__cell"\r\n        *ngFor="let item of scroll.viewPortItems; let index = index"\r\n        (selectstart)="(canSelectTextInTable)"\r\n        (contextmenu)="openContextMenu($event, columnSchema.key, item)"\r\n        (click)="handleOnClick(item, columnSchema.key, $event, columnSchema?.td?.onClick)"\r\n        (dblclick)="handleDblClick(item, columnSchema.key, $event, columnSchema?.td?.dblClick)"\r\n        [style.min-height.px]="columnSchema?.td?.height || clientRowHeight"\r\n        [style.max-height.px]="columnSchema?.td?.height || clientRowHeight"\r\n        [class.table-grid__cell--resizable]="columnSchema?.resizable"\r\n        [class.table-grid__cell--custom-cell]="columnSchema?.customColumn"\r\n        [class.table-grid__cell--strip]="striped ? index % 2 === 0 : null"\r\n        [class.table-grid__cell--enable-selection]="enableSelection"\r\n        [class.table-grid__cell--selected]="selectionEntries[item[primaryKey]]"\r\n        [class.table-grid__cell--text-bold]="columnSchema?.td?.textBold"\r\n        [ngClass]="columnSchema?.td?.class"\r\n        [ngStyle]="columnSchema?.td?.style"\r\n    >\r\n        <div\r\n            class="table-grid__cell--content"\r\n            [class.table-grid__cell--nowrap]="!columnSchema?.customColumn && columnSchema?.td?.nowrap"\r\n        >\r\n            <table-cell\r\n                [item]="item"\r\n                [index]="index"\r\n                [parent]="parent"\r\n                [is-rendered]="isRendered"\r\n                *ngIf="showedCellByDefault"\r\n                [column-index]="columnIndex"\r\n                [column-schema]="columnSchema"\r\n                [is-filterable]="columnSchema?.filterable"\r\n            ></table-cell>\r\n        </div>\r\n    </div>\r\n</virtual-scroller>\r\n',changeDetection:t.ChangeDetectionStrategy.OnPush,encapsulation:t.ViewEncapsulation.None}]}],n.ctorParameters=function(){return[{type:se},{type:t.ChangeDetectorRef},{type:I},{type:N,decorators:[{type:t.Inject,args:[y]}]},{type:t.NgZone},{type:T},{type:he}]},n.propDecorators={source:[{type:t.Input}],striped:[{type:t.Input}],isFirefox:[{type:t.Input,args:["is-firefox"]}],recalculated:[{type:t.Input}],primaryKey:[{type:t.Input,args:["primary-key"]}],selectionEntries:[{type:t.Input,args:["selection-entries"]}],contextMenuTemplate:[{type:t.Input,args:["context-menu"]}],enableSelection:[{type:t.Input,args:["enable-selection"]}],tableViewport:[{type:t.Input,args:["table-viewport"]}],columnVirtualHeight:[{type:t.Input,args:["column-virtual-height"]}],showedCellByDefault:[{type:t.Input,args:["showed-cell-by-default"]}],bufferAmount:[{type:t.Input,args:["buffer-amount"]}],scroll:[{type:t.ViewChild,args:["scroll",{"static":!0}]}]},n}(ve),xe=function(){function e(e,n){this.element=e,this.ngZone=n,this.headerHeight=0,this.footerHeight=0,this.autoHeight={},this.recalculatedHeight=new t.EventEmitter,this.useOnlyAutoViewPort=!1}return Object.defineProperty(e.prototype,"height",{get:function(){return this.autoHeight.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canCalculated",{get:function(){return this.autoHeight.inViewport&&this.autoHeight.sourceLength>0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"style",{get:function(){var t;if(this.height)t=this.height+"px";else if(this.autoHeight.detect){var n=e.getStyle(this.rootCurrentElement,"padding-top"),i=e.getStyle(this.rootCurrentElement,"padding-bottom");t=this.useOnlyAutoViewPort&&this.columnHeight>this.parentOffsetHeight?this.getHeightByViewPort({paddingTop:n,paddingBottom:i}):this.parentOffsetHeight>this.columnHeight?this.getDefaultHeight():this.isEmptyParentHeight?this.getHeightByViewPort({paddingTop:n,paddingBottom:i}):this.getHeightByParent({paddingTop:n,paddingBottom:i})}return t?"display: block; height: "+t:""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isEmptyParentHeight",{get:function(){return this.parentOffsetHeight<parseInt(e.HEAD_TOP)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parentOffsetHeight",{get:function(){return this.rootCurrentElement.clientHeight||e.DEFAULT_VALUE},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentElement",{get:function(){return this.element.nativeElement},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"childElement",{get:function(){return this.element.nativeElement.firstChild||{}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rootCurrentElement",{get:function(){return this.currentElement.parentNode&&this.currentElement.parentNode.parentElement||{}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"columnHeight",{get:function(){return this.autoHeight.columnHeight||0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"autoViewHeight",{get:function(){return document.body.clientHeight-this.currentElement.getBoundingClientRect().top},enumerable:!0,configurable:!0}),e.getStyle=function(e,t){var n="";if(document.defaultView&&document.defaultView.getComputedStyle)try{n=document.defaultView.getComputedStyle(e,"").getPropertyValue(t)}catch(i){n="0px"}else e.currentStyle&&(t=t.replace(/\-(\w)/g,function(e,t){return t.toUpperCase()}),n=e.currentStyle[t]);return n},e.prototype.ngOnInit=function(){var e=this;this.ngZone.runOutsideAngular(function(){e.handler=function(){return e.recalculateTableSize()},window.addEventListener("resize",e.handler,{passive:!0})})},e.prototype.ngOnChanges=function(e){"autoHeight"in e&&this.recalculateTableSize()},e.prototype.ngOnDestroy=function(){window.removeEventListener("resize",this.handler)},e.prototype.recalculateTableSize=function(){var t=this;this.ngZone.runOutsideAngular(function(){clearTimeout(t.taskId),t.taskId=window.setTimeout(function(){t.canCalculated&&!t.isDirtyCheck&&t.markForCheck(),t.isDirtyCheck&&t.autoHeight.inViewport&&(t.calculateHeight(),t.recalculatedHeight.emit())},e.DELAY)})},e.prototype.calculateHeight=function(){this.canCalculated&&this.setHeightByParent()},e.prototype.markForCheck=function(){this.isDirtyCheck=!0,this.parentOffsetHeight<=N.ROW_HEIGHT&&(this.useOnlyAutoViewPort=!0)},e.prototype.getDefaultHeight=function(){var e=this.childElement.offsetHeight-this.childElement.clientHeight||0;return"calc("+(this.columnHeight+e+this.headerHeight+this.footerHeight)+"px)"},e.prototype.getHeightByParent=function(t){var n=t.paddingTop,i=t.paddingBottom;return"calc("+(this.parentOffsetHeight-parseInt(e.HEAD_TOP))+"px - "+n+" - "+i+")"},e.prototype.getHeightByViewPort=function(t){var n=t.paddingTop,i=t.paddingBottom,r=this.autoViewHeight-parseInt(e.HEAD_TOP);return this.columnHeight>r?"calc("+r+"px - "+n+" - "+i+")":this.getDefaultHeight()},e.prototype.setHeightByParent=function(){this.currentElement.setAttribute("style",this.style)},e.DEFAULT_VALUE=0,e.HEAD_TOP="10px",e.DELAY=100,e.decorators=[{type:t.Directive,args:[{selector:"[autoHeight]"}]}],e.ctorParameters=function(){return[{type:t.ElementRef},{type:t.NgZone}]},e.propDecorators={headerHeight:[{type:t.Input}],footerHeight:[{type:t.Input}],autoHeight:[{type:t.Input}],recalculatedHeight:[{type:t.Output}]},e}(),Ce=function(){function e(){}return e.prototype.transform=function(e,t){var n=k(e,t);return S(n)?"-":n},e.decorators=[{type:t.Pipe,args:[{name:"deepPath",pure:!0}]}],e}(),ke=function(){function e(){}return e.prototype.transform=function(e,t){var n=e[t];return S(n)?"-":n},e.decorators=[{type:t.Pipe,args:[{name:"defaultValue",pure:!0}]}],e}(),Ie=function(e){function n(t,n,i,r){var o=e.call(this,n,i)||this;return o.cd=t,o.selection=n,o.utils=i,o.ngZone=r,o.contextType=m,o.cd.reattach(),o}return u(n,e),n.prototype.ngOnInit=function(){var e=this;this.isRendered?this.loaded=!0:this.ngZone.runOutsideAngular(function(){e.taskId=window.setTimeout(function(){e.loaded=!0,O(e.cd)},e.index)})},n.prototype.ngOnDestroy=function(){window.clearTimeout(this.taskId)},n.decorators=[{type:t.Component,args:[{selector:"table-cell",template:'<div #divElement class="table-grid__cell--inner-content" [overflowTooltip]="divElement" [parent]="parent" [class.loaded]="loaded">\r\n    <ng-template [ngIf]="columnSchema?.td?.template" [ngIfElse]="defaultTd">\r\n        <ng-template\r\n            [ngTemplateOutlet]="columnSchema?.td?.template"\r\n            [ngTemplateOutletContext]="{\r\n                $implicit:\r\n                    columnSchema?.td?.context === contextType.CELL\r\n                        ? columnSchema?.td?.useDeepPath\r\n                            ? (item | deepPath: columnSchema.key)\r\n                            : (item | defaultValue: columnSchema.key)\r\n                        : item\r\n            }"\r\n        ></ng-template>\r\n    </ng-template>\r\n    <ng-template #defaultTd>\r\n        <ng-template [ngIf]="isFilterable" [ngIfElse]="simple">\r\n            <ngx-filter-viewer\r\n                [index]="index"\r\n                [key]="columnSchema.key"\r\n                [text]="\r\n                    columnSchema?.td?.useDeepPath\r\n                        ? (item | deepPath: columnSchema.key)\r\n                        : (item | defaultValue: columnSchema.key)\r\n                "\r\n            ></ngx-filter-viewer>\r\n        </ng-template>\r\n        <ng-template #simple>{{\r\n            columnSchema?.td?.useDeepPath\r\n                ? (item | deepPath: columnSchema.key)\r\n                : (item | defaultValue: columnSchema.key)\r\n        }}</ng-template>\r\n    </ng-template>\r\n</div>\r\n',changeDetection:t.ChangeDetectionStrategy.OnPush,encapsulation:t.ViewEncapsulation.None}]}],n.ctorParameters=function(){return[{type:t.ChangeDetectorRef},{type:se},{type:T},{type:t.NgZone}]},n.propDecorators={item:[{type:t.Input}],index:[{type:t.Input}],parent:[{type:t.Input}],isFilterable:[{type:t.Input,args:["is-filterable"]}]},n}(ve),Se=function(){function e(e,n){this.element=e,this.ngZone=n,this.observeVisible=new t.EventEmitter,this.observer=null,this.previousRation=0}return e.prototype.ngAfterViewInit=function(){var t=this;this.observer=new IntersectionObserver(function(n){n.forEach(function(n){t.ngZone.runOutsideAngular(function(){var i=n.intersectionRatio>t.previousRation||n.isIntersecting;t.isRendered?(clearTimeout(t.frameId),t.frameId=window.setTimeout(function(){t.observeVisible.emit(i)},e.MIN_TIME_IDLE)):window.requestAnimationFrame(function(){return t.observeVisible.emit(i)})}),t.previousRation=n.intersectionRatio})},{root:null,rootMargin:"0px 0px 0px 0px",threshold:[0]}),this.observer.observe(this.element.nativeElement)},e.prototype.ngOnDestroy=function(){this.element={nativeElement:null},clearTimeout(this.frameId),this.observer.disconnect()},e.MIN_TIME_IDLE=120,e.decorators=[{type:t.Directive,args:[{selector:"[observerView]"}]}],e.ctorParameters=function(){return[{type:t.ElementRef},{type:t.NgZone}]},e.propDecorators={observeVisible:[{type:t.Output}],isRendered:[{type:t.Input,args:["rendered"]}]},e}(),Te=function(){function e(e,n,i,r){this.contextMenu=e,this.cd=n,this.utils=i,this.ngZone=r,this.visible=!0,this.contextTitle=null,this.disable=!1,this.divider=!1,this.disableSubMenu=!1,this.subMenuWidth=300,this.onClick=new t.EventEmitter,this.offsetX=null,this.offsetY=null}return Object.defineProperty(e.prototype,"state",{get:function(){return this.contextMenu.state},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"clientRect",{get:function(){return this.itemElement.getBoundingClientRect&&this.itemElement.getBoundingClientRect()||{}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itemElement",{get:function(){return this.itemRef&&this.itemRef.nativeElement||{}},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){var e=this;this.subscription=this.contextMenu.events.subscribe(function(){return O(e.cd)})},e.prototype.ngOnDestroy=function(){this.itemRef=null,this.subscription.unsubscribe()},e.prototype.calculateSubMenuPosition=function(t){0!==t.innerHTML.trim().length&&(this.offsetX=this.clientRect.left+this.subMenuWidth-e.MIN_PADDING,this.offsetX=this.offsetX-this.overflowX(),this.offsetY=this.clientRect.top-e.MIN_PADDING,this.offsetY=this.offsetY-this.overflowY(t))},e.prototype.overflowX=function(){var e=this.subMenuWidth+this.offsetX-this.utils.bodyRect.width;return e>0?e+T.SCROLLBAR_WIDTH:0},e.prototype.overflowY=function(e){var t=e.offsetHeight+this.offsetY-this.utils.bodyRect.height;return t>0?t+T.SCROLLBAR_WIDTH:0},e.prototype.emitClick=function(e){var t=this;this.disable||(this.deferCloseMenu(),this.onClick.emit({preventDefault:function(){window.clearTimeout(t.taskId)}}),e.stopPropagation())},e.prototype.deferCloseMenu=function(){var e=this;this.ngZone.runOutsideAngular(function(){e.taskId=window.setTimeout(function(){e.contextMenu.close()})})},e.MIN_PADDING=25,e.decorators=[{type:t.Component,args:[{selector:"ngx-context-menu-item",template:'<ng-template [ngIf]="visible">\n    <div\n        #item\n        class="context-menu__item"\n        (mouseenter)="calculateSubMenuPosition(ref)"\n        [class.context-menu__title]="contextTitle !== null"\n        [class.context-menu__item--disable]="disable"\n        (click)="emitClick($event)"\n    >\n        <ng-content select="ngx-menu-content"></ng-content>\n\n        <div\n            class="context-menu__sub-menu-place"\n            [class.context-menu__sub-hidden]="ref.innerHTML.trim().length === 0 || disableSubMenu !== false"\n        >\n            <img\n                class="sub-menu__arrow-icon"\n                src=\'data:image/svg+xml;utf8,<svg height="48" viewBox="0 0 48 48" width="48" xmlns="http://www.w3.org/2000/svg"><path d="M17.17 32.92l9.17-9.17-9.17-9.17 2.83-2.83 12 12-12 12z"/><path d="M0-.25h48v48h-48z" fill="none"/></svg>\'\n                alt="arrow"\n            />\n\n            <div\n                class="sub-menu__tree"\n                [style.width.px]="subMenuWidth"\n                [style.left.px]="offsetX"\n                [style.top.px]="offsetY"\n            >\n                <div class="sub-menu__tree--content" #ref>\n                    <ng-content select="ngx-context-menu-item"></ng-content>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <ng-template [ngIf]="divider !== false">\n        <ngx-context-menu-divider></ngx-context-menu-divider>\n    </ng-template>\n</ng-template>\n',changeDetection:t.ChangeDetectionStrategy.OnPush,encapsulation:t.ViewEncapsulation.None}]}],e.ctorParameters=function(){return[{type:I},{type:t.ChangeDetectorRef},{type:T},{type:t.NgZone}]},e.propDecorators={visible:[{type:t.Input}],contextTitle:[{type:t.Input}],disable:[{type:t.Input}],divider:[{type:t.Input}],disableSubMenu:[{type:t.Input,args:["disable-sub-menu"]}],subMenuWidth:[{type:t.Input,args:["sub-menu-width"]}],onClick:[{type:t.Output}],itemRef:[{type:t.ViewChild,args:["item",{"static":!1}]}]},e}(),Oe=function(){function e(){}return e.decorators=[{type:t.Component,args:[{selector:"ngx-context-menu-divider",template:'<div class="context-menu__divider"></div>',changeDetection:t.ChangeDetectionStrategy.OnPush,encapsulation:t.ViewEncapsulation.None}]}],e}(),Ee=function(){function e(){this.icon=null,this.noMargin=null,this.alignCenter=null}return Object.defineProperty(e.prototype,"class",{get:function(){var e=null!==this.noMargin?"content-phrase":"";return null!==this.icon?"icon-place "+e:e},enumerable:!0,configurable:!0}),e.decorators=[{type:t.Component,args:[{selector:"ngx-menu-content",template:'<div [class.context-menu__content-place]="icon === null" [class.context-menu__icon-place]="icon !== null">\n    <div class="content" [class.align-center]="alignCenter !== null">\n        <ng-template [ngIf]="icon?.length > 0" [ngIfElse]="content">\n            <img [attr.src]="icon" alt="img" />\n        </ng-template>\n        <ng-template #content>\n            <ng-content></ng-content>\n        </ng-template>\n    </div>\n</div>\n',changeDetection:t.ChangeDetectionStrategy.OnPush,encapsulation:t.ViewEncapsulation.None}]}],e.propDecorators={icon:[{type:t.Input}],noMargin:[{type:t.Input,args:["no-margin"]}],alignCenter:[{type:t.Input,args:["align-center"]}],"class":[{type:t.HostBinding,args:["class"]}]},e}(),De=function(){function e(){}return e.decorators=[{type:t.Component,args:[{selector:"ngx-empty",template:"<ng-content></ng-content>",changeDetection:t.ChangeDetectionStrategy.OnPush,encapsulation:t.ViewEncapsulation.None}]}],e}(),Pe=N.TIME_RELOAD,Re=function(){function e(e,t,n,i){this.ngZone=e,this.cd=t,this.sanitizer=n,this.filterable=i,this.text=null,this.key=null,this.index=0,this.founded=!1,this.cd.reattach()}return e.wrapSelectedHtml=function(e){return'<span style="background-color: #FFFF00; color: #000">'+e+"</span>"},e.prototype.ngOnChanges=function(e){e.text&&e.text.firstChange&&this.defaultHtmlValue()},e.prototype.ngOnInit=function(){var e=this;this.subscription=this.filterable.events.subscribe(function(t){e.filterable.definition[e.key]||e.filterable.globalFilterValue?e.changeSelection(t):e.defaultHtmlValue(),O(e.cd)})},e.prototype.ngOnDestroy=function(){this.subscription.unsubscribe()},e.prototype.changeSelection=function(e){var t=this;this.ngZone.runOutsideAngular(function(){window.clearInterval(t.taskId),t.taskId=window.setTimeout(function(){e.value||t.filterable.definition[t.key]?t.selected(e):t.defaultHtmlValue(),O(t.cd)},Pe+t.index)})},e.prototype.selected=function(t){var n=this.filterable.definition[this.key]||t.value,i=this.filterable.definition[this.key]?this.filterable.filterTypeDefinition[this.key]:t.type;if(i!==P.DOES_NOT_EQUAL&&i!==P.DOES_NOT_CONTAIN){var r,o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");r=i===P.START_WITH?new RegExp("^"+o,"i"):i===P.END_WITH?new RegExp(o+"$","i"):i===P.EQUALS?new RegExp("^"+o+"$","i"):new RegExp(""+o,"ig");var l=String(this.text).replace(r,function(t){return e.wrapSelectedHtml(t)});this.html=this.sanitizer.bypassSecurityTrustHtml(l),l.includes("span")&&(this.founded=!0)}},e.prototype.defaultHtmlValue=function(){this.html=this.text,this.founded=!1},e.decorators=[{type:t.Component,args:[{selector:"ngx-filter-viewer",template:'<span [class.filter-founded]="founded" [innerHTML]="html"></span>',changeDetection:t.ChangeDetectionStrategy.OnPush,encapsulation:t.ViewEncapsulation.None}]}],e.ctorParameters=function(){return[{type:t.NgZone},{type:t.ChangeDetectorRef},{type:a.DomSanitizer},{type:$}]},e.propDecorators={text:[{type:t.Input}],key:[{type:t.Input}],index:[{type:t.Input}]},e}(),He=function(){function e(){}return e.decorators=[{type:t.Component,args:[{selector:"drag-icon",template:'<img\n    class="table-grid-icon--draggable"\n    src=\'data:image/svg+xml;utf8,<svg height="32px" id="Layer_1" style="enable-background:new 0 0 32 32;" version="1.1" viewBox="0 0 32 32" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M31.338,14.538L27.38,10.58C26.994,10.193,26.531,10,26,10c-1.188,0-2,1.016-2,2c0,0.516,0.186,0.986,0.58,1.38L25.2,14H18  V6.8l0.62,0.62C19.014,7.814,19.484,8,20,8c0.984,0,2-0.813,2-2c0-0.531-0.193-0.994-0.58-1.38l-3.973-3.974  C17.08,0.279,16.729,0,16,0s-1.135,0.334-1.463,0.662L10.58,4.62C10.193,5.006,10,5.469,10,6c0,1.188,1.016,2,2,2  c0.516,0,0.986-0.186,1.38-0.58L14,6.8V14H6.8l0.62-0.62C7.814,12.986,8,12.516,8,12c0-0.984-0.813-2-2-2  c-0.531,0-0.994,0.193-1.38,0.58l-3.958,3.958C0.334,14.866,0,15.271,0,16s0.279,1.08,0.646,1.447L4.62,21.42  C5.006,21.807,5.469,22,6,22c1.188,0,2-1.016,2-2c0-0.516-0.186-0.986-0.58-1.38L6.8,18H14v7.2l-0.62-0.62  C12.986,24.186,12.516,24,12,24c-0.984,0-2,0.813-2,2c0,0.531,0.193,0.994,0.58,1.38l3.957,3.958C14.865,31.666,15.271,32,16,32  s1.08-0.279,1.447-0.646l3.973-3.974C21.807,26.994,22,26.531,22,26c0-1.188-1.016-2-2-2c-0.516,0-0.986,0.186-1.38,0.58L18,25.2V18  h7.2l-0.62,0.62C24.186,19.014,24,19.484,24,20c0,0.984,0.813,2,2,2c0.531,0,0.994-0.193,1.38-0.58l3.974-3.973  C31.721,17.08,32,16.729,32,16S31.666,14.866,31.338,14.538z"/></svg>\'\n    alt="sort"\n/>\n',encapsulation:t.ViewEncapsulation.None,changeDetection:t.ChangeDetectionStrategy.OnPush}]}],e}(),Ve=function(){function e(){}return e.decorators=[{type:t.Component,args:[{selector:"ngx-source-null",template:"<ng-content></ng-content>",encapsulation:t.ViewEncapsulation.None,changeDetection:t.ChangeDetectionStrategy.OnPush}]}],e}(),Me=function(){function e(e){this.ngZone=e,this.element=null,this.parent=null,this.textCenter=null,this.destroy$=new l.Subject,this.timeIdle=500,this.overflowSelector="table-grid__cell-overflow-content",this.frameId=null}return Object.defineProperty(e.prototype,"overflowContentElem",{get:function(){return document.querySelector("."+this.overflowSelector)},enumerable:!0,configurable:!0}),e.checkOverflow=function(e,t){return e.offsetWidth>t.offsetWidth||e.offsetHeight>t.offsetHeight||e.scrollWidth>e.offsetWidth||e.scrollHeight>e.offsetHeight},e.prototype.ngAfterViewInit=function(){var e=this;l.fromEvent(this.element,"mouseenter").pipe(o.takeUntil(this.destroy$)).subscribe(function(){return e.detectCheckOverflow()}),l.fromEvent(this.element,"mouseleave").pipe(o.takeUntil(this.destroy$)).subscribe(function(){clearInterval(e.frameId)})},e.prototype.ngOnDestroy=function(){clearInterval(this.frameId),this.removeElement(),this.destroy$.next(!0),this.destroy$.unsubscribe(),this.ngZone=null,this.element=null,this.parent=null,this.destroy$=null},e.prototype.detectCheckOverflow=function(){var t=this;clearInterval(this.frameId),this.ngZone.runOutsideAngular(function(){t.frameId=window.setTimeout(function(){e.checkOverflow(t.element,t.parent)&&t.showTooltip()},t.timeIdle)})},e.prototype.showTooltip=function(){var e=this;if(this.overflowContentElem)this.removeElement();else{var t=document.createElement("div"),n=this.element.getBoundingClientRect();t.classList.add(this.overflowSelector,this.textCenter?"text-center":""),t.style.cssText="left: "+n.left+"px; top: "+n.top+"px",document.body.appendChild(t),this.ngZone.runOutsideAngular(function(){window.setTimeout(function(){e.overflowContentElem&&(e.overflowContentElem.classList.add("visible"),e.overflowContentElem.innerHTML=e.element.innerHTML.trim().replace(/<!--.*?-->/g,""),l.fromEvent(e.overflowContentElem,"mouseleave").pipe(o.takeUntil(e.destroy$)).subscribe(function(){return e.removeElement()}))})})}},e.prototype.removeElement=function(){this.overflowContentElem&&this.overflowContentElem.parentNode.removeChild(this.overflowContentElem)},e.decorators=[{type:t.Directive,args:[{selector:"[overflowTooltip]"}]}],e.ctorParameters=function(){return[{type:t.NgZone}]},e.propDecorators={element:[{type:t.Input,args:["overflowTooltip"]}],parent:[{type:t.Input,args:["parent"]}],textCenter:[{type:t.Input,args:["text-center"]}]},e}(),Ae=function(){function e(){}return e.forRoot=function(t){return void 0===t&&(t={}),{ngModule:e,providers:[{provide:e.ROOT_OPTIONS,useValue:t},{provide:y,useFactory:e.loggerConfigFactory,deps:[e.ROOT_OPTIONS]}]}},e.loggerConfigFactory=function(e){return Object.assign(new N,e)},e.ROOT_OPTIONS=new t.InjectionToken("NGX_TABLE_OPTIONS"),e.decorators=[{type:t.NgModule,args:[{imports:[r.CommonModule,n.VirtualScrollerModule,i.DragDropModule],declarations:[me,be,xe,we,_e,j,A,L,Ce,ke,V,Ie,Se,D,Te,Oe,Ee,De,z,B,Re,X,U,He,Ve,Me],providers:[T,F],exports:[me,A,L,j,V,D,Te,Oe,Ee,De,z,B,Re,X,U,Ve]}]}],e}();e.ImplicitContext=m,e.NgxColumnComponent=j,e.NgxTableViewChangesService=pe,e.TableBuilderComponent=me,e.TableBuilderModule=Ae,e.TableFilterType=P,e.shallowUpdateRow=function(e,t,n,i){var r,o=e.indexOf(t);return function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(f(arguments[t]));return e}(e.slice(0,o),[p({},e[o],(r={},r[n]=i,r))],e.slice(o+1,e.length))},e.ɵa=Q,e.ɵb=V,e.ɵba=y,e.ɵbb=N,e.ɵbc=xe,e.ɵbd=we,e.ɵbe=ve,e.ɵbf=_e,e.ɵbg=Ce,e.ɵbh=ke,e.ɵbi=Ie,e.ɵbj=Se,e.ɵbk=Te,e.ɵbl=Oe,e.ɵbm=Ee,e.ɵbn=De,e.ɵbo=Re,e.ɵbp=He,e.ɵbq=Ve,e.ɵbr=Me,e.ɵc=H,e.ɵd=A,e.ɵe=M,e.ɵf=L,e.ɵg=D,e.ɵh=E,e.ɵi=T,e.ɵj=S,e.ɵk=I,e.ɵl=z,e.ɵm=K,e.ɵn=B,e.ɵo=X,e.ɵp=U,e.ɵq=$,e.ɵr=F,e.ɵs=te,e.ɵt=re,e.ɵu=se,e.ɵv=ce,e.ɵw=ue,e.ɵx=he,e.ɵy=J,e.ɵz=be,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=table-builder.umd.min.js.map