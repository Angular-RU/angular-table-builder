<div
    #tableViewport
    wheelThrottling
    class="table-grid"
    *ngIf="source?.length"
    [style.width]="width"
    [style.height.px]="height"
    (scrollOverload)="scrollStatus.overload = $event"
>
    <div
        #column
        inViewport
        class="table-grid__column"
        *ngFor="let key of columnKeys"
        [style.height.px]="columnHeight"
        [style.min-width.px]="clientColWidth"
        [class.column-is-visible]="column['visible']"
        [class.column-is-invisible]="!column['visible']"
        (inViewportAction)="column['visible'] = $event.visible"
    >
        <table-thead [column-key]="key" [client-row-height]="clientRowHeight"></table-thead>

        <table-tbody
            *ngIf="column['visible']"
            [source]="source"
            [column-key]="key"
            [primary-key]="primaryKey"
            [scroll-status]="scrollStatus"
            [buffer-amount]="bufferAmount"
            [table-viewport]="tableViewport"
            [client-row-height]="clientRowHeight"
            [style.margin-top.px]="clientRowHeight"
            [column-virtual-height]="columnVirtualHeight"
            (outsideZoneUpdated)="checkOutsizeZoneUpdated()"
        >
        </table-tbody>
    </div>
</div>
