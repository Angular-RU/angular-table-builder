<div
    #tableViewport
    *ngIf="source?.length"
    wheelThrottling
    class="table-grid"
    [style.width]="width"
    [style.height.px]="height"
    [class.table-grid__native-scrollbar]="nativeScrollbar"
>
    <div
        #column
        inViewport
        class="table-grid__column"
        *ngFor="let key of columnKeys"
        [style.height.px]="columnHeight"
        [style.min-width.px]="clientColWidth"
        [class.column-is-visible]="importantVisible || column['visible']"
        [class.column-is-invisible]="!column['visible']"
        (inViewportAction)="inViewportAction(column, $event)"
    >
        <table-thead [column-key]="key" [client-row-height]="clientRowHeight"></table-thead>

        <table-tbody
            *ngIf="importantVisible || column['visible']"
            [source]="source"
            [column-key]="key"
            [primary-key]="primaryKey"
            [scroll-status]="scrollStatus"
            [buffer-amount]="bufferAmount"
            [table-viewport]="tableViewport"
            [client-row-height]="clientRowHeight"
            [style.margin-top.px]="clientRowHeight"
            [column-virtual-height]="columnVirtualHeight"
        >
        </table-tbody>
    </div>
</div>
