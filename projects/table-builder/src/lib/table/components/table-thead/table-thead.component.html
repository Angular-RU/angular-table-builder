<div
    [style.top.px]="headerTop"
    class="table-grid__cell table-grid__header-cell"
    [class.table-grid__cell--custom-cell]="columnsSchema[key]?.customColumn"
    [class.table-grid__cell--text-bold]="columnsSchema[key]?.th.textBold"
    [class.table-grid__cell--resizable]="columnsSchema[key]?.resizable"
    [style.min-height.px]="columnsSchema[key]?.th.height || clientRowHeight"
    [style.max-height.px]="columnsSchema[key]?.th.height || clientRowHeight"
    [ngClass]="columnsSchema[key]?.th.class"
    [ngStyle]="columnsSchema[key]?.th.style"
>
    <div
        class="table-grid__cell--content table-grid__header-cell--content"
        [class.table-grid__cell--content-sortable]="columnsSchema[key]?.sortable"
        [class.table-grid__cell--nowrap]="columnsSchema[key]?.th.nowrap"
        (click)="columnsSchema[key]?.sortable ? sortByKey.emit(key) : null"
    >
        <ng-template
            [ngIf]="columnsSchema[key]?.th.template"
            [ngTemplateOutlet]="columnsSchema[key]?.th.template"
            [ngIfElse]="defaultTh"
        ></ng-template>
        <ng-template #defaultTh>
            <ng-template [ngIf]="!columnsSchema[key]?.th.emptyHead">
                {{ columnsSchema[key]?.th.headTitle || (key | titlecase) }}
            </ng-template>
        </ng-template>
    </div>

    <div
        *ngIf="!columnsSchema[key]?.customColumn && columnsSchema[key]?.sortable"
        class="table-grid__column--sortable"
        [class.table-grid__column--sortable-active]="sortableDefinition[key]"
        [class.table-grid__column--sortable-asc]="sortableDefinition[key] === orderType.ASC"
        [class.table-grid__column--sortable-desc]="sortableDefinition[key] === orderType.DESC"
        (click)="columnsSchema[key]?.sortable ? sortByKey.emit(key) : null"
    >
        <img
            class="table-grid-icon--sortable"
            src='data:image/svg+xml;utf8,<svg id="Layer_1" style="enable-background:new 0 0 512 512;" version="1.1" viewBox="0 0 512 512" width="512px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M128.4,189.3L233.4,89c5.8-6,13.7-9,22.4-9c8.7,0,16.5,3,22.4,9l105.4,100.3c12.5,11.9,12.5,31.3,0,43.2  c-12.5,11.9-32.7,11.9-45.2,0L288,184.4v217c0,16.9-14.3,30.6-32,30.6c-17.7,0-32-13.7-32-30.6v-217l-50.4,48.2  c-12.5,11.9-32.7,11.9-45.2,0C115.9,220.6,115.9,201.3,128.4,189.3z"/></svg>'
            alt="sort"
        />
    </div>

    <div
        class="table-grid__column--filterable"
        [class.table-grid__column--filterable-active]="filterableDefinition[key]"
        *ngIf="!columnsSchema[key]?.customColumn && columnsSchema[key]?.filterable"
        (click)="columnsSchema[key]?.filterable ? openFilter(key, $event) : null"
    >
        <svg
            class="table-grid-icon--filterable"
            fill="none"
            height="24"
            stroke="#000"
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            viewBox="0 0 24 24"
            width="24"
            xmlns="http://www.w3.org/2000/svg"
        >
            <polygon points="22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"></polygon>
        </svg>
    </div>

    <div
        *ngIf="columnsSchema[key]?.resizable"
        class="table-grid__column--resize"
        (mousedown)="resize.emit({ event: $event, key: key })"
    ></div>
</div>
