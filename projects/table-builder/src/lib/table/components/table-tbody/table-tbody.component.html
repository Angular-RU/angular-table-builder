<virtual-scroller
    #scroll
    [items]="source"
    [stripedTable]="true"
    [checkResizeInterval]="0"
    [scrollAnimationTime]="2000"
    [parentScroll]="tableViewport"
    [enableUnequalChildrenSizes]="true"
    [bufferAmount]="clientBufferAmount"
    [resizeBypassRefreshThreshold]="0"
    [useMarginInsteadOfTranslate]="false"
    [executeRefreshOutsideAngularZone]="true"
    [modifyOverflowStyleOfParentScroll]="false"
    [style.height.px]="columnVirtualHeight"
    (vsChange)="vsChange()"
>
    <div
        #parent
        class="table-grid__cell"
        *ngFor="let item of scroll.viewPortItems; let index = index; trackBy: trackByIdx.bind(this)"
        (selectstart)="(canSelectTextInTable)"
        (contextmenu)="openContextMenu($event, columnSchema.key, item)"
        (click)="handleOnClick(item, columnSchema.key, $event, columnSchema?.td?.onClick)"
        (dblclick)="handleDblClick(item, columnSchema.key, $event, columnSchema?.td?.dblClick)"
        [style.min-height.px]="columnSchema?.td?.height || clientRowHeight"
        [style.max-height.px]="columnSchema?.td?.height || clientRowHeight"
        [class.table-grid__cell--resizable]="columnSchema?.resizable"
        [class.table-grid__cell--custom-cell]="columnSchema?.customColumn"
        [class.table-grid__cell--strip]="striped ? index % 2 === 0 : null"
        [class.table-grid__cell--enable-selection]="enableSelection"
        [class.table-grid__cell--selected]="selectionEntries[item[primaryKey]]"
        [class.table-grid__cell--text-bold]="columnSchema?.td?.textBold"
        [ngClass]="columnSchema?.td?.class"
        [ngStyle]="columnSchema?.td?.style"
    >
        <div
            class="table-grid__cell--content"
            [class.table-grid__cell--nowrap]="!columnSchema?.customColumn && columnSchema?.td?.nowrap"
        >
            <table-cell
                [item]="item"
                [index]="index"
                [parent]="parent"
                [is-rendered]="isRendered"
                *ngIf="showedCellByDefault"
                [column-index]="columnIndex"
                [column-schema]="columnSchema"
                [is-filterable]="columnSchema?.filterable"
            ></table-cell>
        </div>
    </div>
</virtual-scroller>
