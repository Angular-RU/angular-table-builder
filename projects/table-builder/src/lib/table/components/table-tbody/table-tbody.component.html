<virtual-scroller
    #scroll
    [items]="source"
    [@fadeAnimation]="'in'"
    [scrollAnimationTime]="1000"
    [executeRefreshOutsideAngularZone]="true"
    [scrollThrottlingTime]="10"
    [parentScroll]="tableViewport"
    [bufferAmount]="clientBufferAmount"
    [style.height.px]="columnVirtualHeight"
    [useMarginInsteadOfTranslate]="true"
    [resizeBypassRefreshThreshold]="0"
    [enableUnequalChildrenSizes]="true"
    [modifyOverflowStyleOfParentScroll]="false"
    (vsChange)="cd.detectChanges()"
>
    <div
        class="table-grid__cell"
        *ngFor="let item of scroll.viewPortItems; let index = index; trackBy: trackByIdx.bind(this)"
        [class.table-grid__cell-strip]="striped ? (item[primaryKey] || index) % 2 === 0 : null"
        [style.min-height.px]="clientRowHeight"
        [style.max-height.px]="clientRowHeight"
        [style.line-height.px]="clientRowHeight"
    >
        <ng-template
            [ngIf]="columnsSchema[key]?.td.template"
            [ngTemplateOutlet]="columnsSchema[key]?.td.template"
            [ngTemplateOutletContext]="{ $implicit: item | deepPath: key }"
            [ngIfElse]="defaultTd"
        >
        </ng-template>
        <ng-template #defaultTd>{{ item[key] }}</ng-template>
    </div>
</virtual-scroller>
